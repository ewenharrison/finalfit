<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>All tables examples • finalfit</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="All tables examples">
<meta property="og:description" content="finalfit">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">finalfit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/finalfit.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/all_plots_examples.html">All plots examples</a>
    </li>
    <li>
      <a href="../articles/all_tables_examples.html">All tables examples</a>
    </li>
    <li>
      <a href="../articles/bootstrap.html">Bootstrap simulation for model prediction</a>
    </li>
    <li>
      <a href="../articles/data_prep.html">Preparing data for finalfit</a>
    </li>
    <li>
      <a href="../articles/export.html">Exporting tables and plots</a>
    </li>
    <li>
      <a href="../articles/missing.html">Missing data</a>
    </li>
    <li>
      <a href="../articles/survival.html">Time-to-event (Survival)</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ewenharrison/finalfit/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>All tables examples</h1>
                        <h4 data-toc-skip class="author">Ewen
Harrison</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ewenharrison/finalfit/blob/HEAD/vignettes/all_tables_examples.Rmd" class="external-link"><code>vignettes/all_tables_examples.Rmd</code></a></small>
      <div class="hidden name"><code>all_tables_examples.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"finalfit"</span><span class="op">)</span></code></pre></div>
<div class="section level2">
<h2 id="cross-tables">1 Cross tables<a class="anchor" aria-label="anchor" href="#cross-tables"></a>
</h2>
<p>Two-way tables are used extensively in healthcare research, e.g. a
2x2 table comparing two factors with two levels each, or table 1 from a
typical clinical study or trial</p>
<p>The main functions all take a <code>dependent</code> variable - the
outcome - and <code>explanatory</code> variables - predictors or
exposures (any number categorical or continuous variables).</p>
<div class="section level3">
<h3 id="default">1.01 Default<a class="anchor" aria-label="anchor" href="#default"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
</tr>
</tbody>
</table>
<p>Note, chi-squared warnings will be generated when the expected count
in any cell is less than 5. Fisher’s exact test can be used as below, or
go straight to a univariable logistic regression,
e.g. <code>colon_s %&gt;% finalfit(dependent, explanatory)</code></p>
</div>
<div class="section level3">
<h3 id="add-or-edit-variable-labels">1.02 Add or edit variable labels<a class="anchor" aria-label="anchor" href="#add-or-edit-variable-labels"></a>
</h3>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
        sex.factor <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">sex.factor</span>, <span class="st">"Gender"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
</tr>
<tr class="odd">
<td align="left">Gender</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="p-value-for-hypothesis-test">1.03 P-value for hypothesis test<a class="anchor" aria-label="anchor" href="#p-value-for-hypothesis-test"></a>
</h3>
<p>Defaults are chi-squared for categorical explanatory variables and an
F-test for continuous (<code>aov</code>, analysis of variance).
Alternatives can be specified as per below.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="right">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="with-fishers-exact-test">1.04 With Fisher’s exact test<a class="anchor" aria-label="anchor" href="#with-fishers-exact-test"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, p_cat <span class="op">=</span> <span class="st">"fisher"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="left">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="left">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
<td align="left">0.026</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="parametric-explanatory-variables">1.05 Parametric explanatory variables<a class="anchor" aria-label="anchor" href="#parametric-explanatory-variables"></a>
</h3>
<p>Summaries for continuous explanatory variables are mean (standard
deviation) with <code>aov</code> statistical test by default. The
statistical test can be changed to the Welch t-test when there are two
dependent variable levels if desired.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, p_cont_para <span class="op">=</span> <span class="st">"t.test"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span>
<span class="co">#&gt; Warning: There was 1 warning in `dplyr::summarise()`.</span>
<span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> In argument: `chisq.test(age.factor, perfor.factor)$p.value`.</span>
<span class="co">#&gt; Caused by warning in `chisq.test()`:</span>
<span class="co">#&gt; <span style="color: #BBBB00;">!</span> Chi-squared approximation may be incorrect</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="left">0.586</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="left">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
<td align="left">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="non-parametric-explanatory-variables">1.06 Non-parametric explanatory variables<a class="anchor" aria-label="anchor" href="#non-parametric-explanatory-variables"></a>
</h3>
<p>If desired, all continuous explanatory variables can be considered
non-parametric. Summaries will be median (interquartile range) and the
statistical test is Kruskal-Wallis/Mann-Whitney U. Use
<code>cont_range = FALSE</code> if wish single-digit IQR,
i.e. Q3-Q1.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"nodes"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont <span class="op">=</span> <span class="st">"median"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="16%">
<col width="18%">
<col width="28%">
<col width="28%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Median (IQR)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">60.0 (50.0 to 68.0)</td>
<td align="right">0.578</td>
</tr>
<tr class="even">
<td align="left">nodes</td>
<td align="left">Median (IQR)</td>
<td align="right">2.0 (1.0 to 5.0)</td>
<td align="right">3.0 (2.0 to 4.0)</td>
<td align="right">0.125</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
<td align="right">0.035</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="select-specific-non-parametric-variables">1.07 Select specific non-parametric variables<a class="anchor" aria-label="anchor" href="#select-specific-non-parametric-variables"></a>
</h3>
<p>Many have asked in the past if only particular variables can be
considered non-parametric. The argument <code>cont_nonpara</code> can
take a vector (e.g. <code>c(1, 2, 3, 4)</code>) of values corresponding
to the explanatory variable to specify which should be summarised as a
median and be passed to a non-parametric test.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"nodes"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont_nonpara <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="right">0.542</td>
</tr>
<tr class="even">
<td align="left">nodes</td>
<td align="left">Median (IQR)</td>
<td align="right">2.0 (1.0 to 5.0)</td>
<td align="right">3.0 (2.0 to 4.0)</td>
<td align="right">0.125</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
<td align="right">0.035</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="missing-values-for-the-explanatory-variables">1.08 Missing values for the explanatory variables<a class="anchor" aria-label="anchor" href="#missing-values-for-the-explanatory-variables"></a>
</h3>
<p>Always consider summarising missing values when describing your
data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="right">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="pass-missing-values-to-statistical-tests">1.09 Pass missing values to statistical tests<a class="anchor" aria-label="anchor" href="#pass-missing-values-to-statistical-tests"></a>
</h3>
<p>This is a change from the default behaviour introduced in Finalfit
1.0.0. Previously, when missing data was presented it was also
considered as a level in the statistical test. This may or may not be
desired. Control this now using <code>na_to_p = TRUE</code> to include
missing data in test. A message is produced reminding you that you are
doing that.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>, 
                                         na_to_p <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span>
<span class="co">#&gt; Explanatory variable(s) missing data included in hypothesis test (p-value).</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="right">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="right">0.042</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="row-proportions-rather-than-column">1.10 Row proportions (rather than column)<a class="anchor" aria-label="anchor" href="#row-proportions-rather-than-column"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                         column <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="right">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (97.1)</td>
<td align="right">2 (2.9)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (97.1)</td>
<td align="right">10 (2.9)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (97.1)</td>
<td align="right">15 (2.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (NaN)</td>
<td align="right">0 (NaN)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (97.1)</td>
<td align="right">13 (2.9)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (97.1)</td>
<td align="right">14 (2.9)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (NaN)</td>
<td align="right">0 (NaN)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (97.7)</td>
<td align="right">17 (2.3)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (94.3)</td>
<td align="right">10 (5.7)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">21 (100.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="total-column">1.11 Total column<a class="anchor" aria-label="anchor" href="#total-column"></a>
</h3>
<p>The terms total column was introduced before this function summarised
continuous variables. It would be better to be “All data” or something
similar, as the continous explanatory variables a summary statistic is
produced for all data. However, to keep backwards compatibility we have
left it unchanged for now. For producing row totals including continous
explanatory variables, see <code>add_row_total</code> below.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont <span class="op">=</span> <span class="st">"median"</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                         column <span class="op">=</span> <span class="cn">TRUE</span>, total_col <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="14%">
<col width="21%">
<col width="21%">
<col width="21%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Median (IQR)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">60.0 (50.0 to 68.0)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">0.578</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">70 (7.5)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right">344 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right">515 (55.4)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">445 (47.9)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right">484 (52.1)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="right">732 (78.8)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="right">176 (18.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="row-totals-with-missing">1.12 Row totals with missing<a class="anchor" aria-label="anchor" href="#row-totals-with-missing"></a>
</h3>
<p>This was introduced to deal with the problem of summarising missing
data for continuous variables. By default, it provides the total N for
the variable and includes a column enumerating missing values.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                         total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                         add_row_total <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="13%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">Missing N</th>
<th align="right">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="left">Total</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="left">59.8 (11.9)</td>
<td align="left">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="left">70 (7.5)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="left">344 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="left">515 (55.4)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="left">445 (47.9)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="left">484 (52.1)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">908 (97.7)</td>
<td align="right">21</td>
<td align="right">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="left">732 (78.8)</td>
<td align="left">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="left">176 (18.9)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="left">21 (2.3)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="row-totals-without-missing">1.13 Row totals without missing<a class="anchor" aria-label="anchor" href="#row-totals-without-missing"></a>
</h3>
<p>Remove missing column.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                         total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                         add_row_total <span class="op">=</span> <span class="cn">TRUE</span>,
                                         include_row_missing_col <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="7%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">Total</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">929 (100.0)</td>
<td align="right">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="right">59.8 (11.9)</td>
<td align="left">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">929 (100.0)</td>
<td align="right">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">70 (7.5)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right">344 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right">515 (55.4)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">929 (100.0)</td>
<td align="right">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">445 (47.9)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right">484 (52.1)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">908 (97.7)</td>
<td align="right">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="right">732 (78.8)</td>
<td align="left">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="right">176 (18.9)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="row-totals-with-user-specified-column-names">1.14 Row totals with user-specified column names<a class="anchor" aria-label="anchor" href="#row-totals-with-user-specified-column-names"></a>
</h3>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>,
                                         total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                         add_row_total <span class="op">=</span> <span class="cn">TRUE</span>,
                                         row_totals_colname <span class="op">=</span> <span class="st">"N (total)"</span>,
                                         row_missing_colname <span class="op">=</span> <span class="st">"N (missing)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">N (total)</th>
<th align="right">N (missing)</th>
<th align="right">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="left">Total</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">Mean (SD)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">58.4 (13.3)</td>
<td align="left">59.8 (11.9)</td>
<td align="left">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="left">70 (7.5)</td>
<td align="left">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="left">344 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="left">515 (55.4)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="left">445 (47.9)</td>
<td align="left">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="left">484 (52.1)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">908 (97.7)</td>
<td align="right">21</td>
<td align="right">No</td>
<td align="right">715 (81.2)</td>
<td align="right">17 (63.0)</td>
<td align="left">732 (80.6)</td>
<td align="left">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">166 (18.8)</td>
<td align="right">10 (37.0)</td>
<td align="left">176 (19.4)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="order-a-variable-by-total">1.15 Order a variable by total<a class="anchor" aria-label="anchor" href="#order-a-variable-by-total"></a>
</h3>
<p>This is intended for when there is only one <code>explanatory</code>
variable.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"extent.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont <span class="op">=</span> <span class="st">"median"</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                         column <span class="op">=</span> <span class="cn">TRUE</span>, total_col <span class="op">=</span> <span class="cn">TRUE</span>, orderbytotal <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="22%">
<col width="26%">
<col width="14%">
<col width="13%">
<col width="14%">
<col width="8%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Extent of spread</td>
<td align="left">Serosa</td>
<td align="right">736 (81.6)</td>
<td align="right">23 (85.2)</td>
<td align="right">759 (81.7)</td>
<td align="right">0.200</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Muscle</td>
<td align="right">105 (11.6)</td>
<td align="right">1 (3.7)</td>
<td align="right">106 (11.4)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Adjacent structures</td>
<td align="right">40 (4.4)</td>
<td align="right">3 (11.1)</td>
<td align="right">43 (4.6)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Submucosa</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="add-column-totals">1.17 Add column totals<a class="anchor" aria-label="anchor" href="#add-column-totals"></a>
</h3>
<p>Column totals can be added, and by default are presented with a row
percentage.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"rx.factor"</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>,
                                         add_col_totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="left">Obs</th>
<th align="left">Lev</th>
<th align="right">Lev+5FU</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N (%)</td>
<td align="left"></td>
<td align="left">315 (33.9)</td>
<td align="left">310 (33.4)</td>
<td align="right">304 (32.7)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="left">25 (7.9)</td>
<td align="left">19 (6.1)</td>
<td align="right">26 (8.6)</td>
<td align="right">0.572</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="left">124 (39.4)</td>
<td align="left">115 (37.1)</td>
<td align="right">105 (34.5)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="left">166 (52.7)</td>
<td align="left">176 (56.8)</td>
<td align="right">173 (56.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="left">149 (47.3)</td>
<td align="left">133 (42.9)</td>
<td align="right">163 (53.6)</td>
<td align="right">0.028</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="left">166 (52.7)</td>
<td align="left">177 (57.1)</td>
<td align="right">141 (46.4)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="add-column-totals-without-proportion-">1.18 Add column totals without proportion.<a class="anchor" aria-label="anchor" href="#add-column-totals-without-proportion-"></a>
</h3>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"rx.factor"</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>,
                                         add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>,
                                         include_col_totals_percent <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>    <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="left">Obs</th>
<th align="left">Lev</th>
<th align="right">Lev+5FU</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N</td>
<td align="left"></td>
<td align="left">315</td>
<td align="left">310</td>
<td align="right">304</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="left">25 (7.9)</td>
<td align="left">19 (6.1)</td>
<td align="right">26 (8.6)</td>
<td align="right">0.572</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="left">124 (39.4)</td>
<td align="left">115 (37.1)</td>
<td align="right">105 (34.5)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="left">166 (52.7)</td>
<td align="left">176 (56.8)</td>
<td align="right">173 (56.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="left">149 (47.3)</td>
<td align="left">133 (42.9)</td>
<td align="right">163 (53.6)</td>
<td align="right">0.028</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="left">166 (52.7)</td>
<td align="left">177 (57.1)</td>
<td align="right">141 (46.4)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="add-column-totals-with-user-specified-row-name-and-prefix-">1.19 Add column totals with user-specified row name and prefix.<a class="anchor" aria-label="anchor" href="#add-column-totals-with-user-specified-row-name-and-prefix-"></a>
</h3>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"rx.factor"</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>,
                                         add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>,
                                         include_col_totals_percent <span class="op">=</span> <span class="cn">FALSE</span>,
                                         col_totals_rowname <span class="op">=</span> <span class="st">""</span>,
                                         col_totals_prefix <span class="op">=</span> <span class="st">"N="</span><span class="op">)</span>  <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="left">Obs</th>
<th align="left">Lev</th>
<th align="right">Lev+5FU</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="left">N=315</td>
<td align="left">N=310</td>
<td align="right">N=304</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="left">25 (7.9)</td>
<td align="left">19 (6.1)</td>
<td align="right">26 (8.6)</td>
<td align="right">0.572</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="left">124 (39.4)</td>
<td align="left">115 (37.1)</td>
<td align="right">105 (34.5)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="left">166 (52.7)</td>
<td align="left">176 (56.8)</td>
<td align="right">173 (56.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="left">149 (47.3)</td>
<td align="left">133 (42.9)</td>
<td align="right">163 (53.6)</td>
<td align="right">0.028</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="left">166 (52.7)</td>
<td align="left">177 (57.1)</td>
<td align="right">141 (46.4)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="label-with-dependent-name">1.20 Label with <code>dependent</code> name<a class="anchor" aria-label="anchor" href="#label-with-dependent-name"></a>
</h3>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont <span class="op">=</span> <span class="st">"median"</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                         column <span class="op">=</span> <span class="cn">TRUE</span>, total_col <span class="op">=</span> <span class="cn">TRUE</span>, add_dependent_label <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="22%">
<col width="12%">
<col width="19%">
<col width="19%">
<col width="19%">
<col width="5%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Perforation</th>
<th align="left"></th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Median (IQR)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">60.0 (50.0 to 68.0)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">0.578</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">70 (7.5)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right">344 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right">515 (55.4)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">445 (47.9)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right">484 (52.1)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="right">732 (78.8)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="right">176 (18.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>The dependent name cannot be passed directly to the table
intentionally. This is to avoid errors when code is copied and the name
is not updated. Change the dependent label using the following. The
prefix (“Dependent:”) and any suffix can be altered.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    perfor.factor <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">perfor.factor</span>, <span class="st">"Perforated cancer"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont <span class="op">=</span> <span class="st">"median"</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
    column <span class="op">=</span> <span class="cn">TRUE</span>, total_col <span class="op">=</span> <span class="cn">TRUE</span>, add_dependent_label <span class="op">=</span> <span class="cn">TRUE</span>, dependent_label_prefix <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="18%">
<col width="13%">
<col width="20%">
<col width="20%">
<col width="20%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">Perforated cancer</th>
<th align="left"></th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Median (IQR)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">60.0 (50.0 to 68.0)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">0.578</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5)</td>
<td align="right">2 (7.4)</td>
<td align="right">70 (7.5)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0)</td>
<td align="right">10 (37.0)</td>
<td align="right">344 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4)</td>
<td align="right">15 (55.6)</td>
<td align="right">515 (55.4)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">445 (47.9)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1)</td>
<td align="right">14 (51.9)</td>
<td align="right">484 (52.1)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (79.3)</td>
<td align="right">17 (63.0)</td>
<td align="right">732 (78.8)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.4)</td>
<td align="right">10 (37.0)</td>
<td align="right">176 (18.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">21 (2.3)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="dependent-variable-with-any-number-of-factor-levels-supported">1.21 Dependent variable with any number of factor levels
supported<a class="anchor" aria-label="anchor" href="#dependent-variable-with-any-number-of-factor-levels-supported"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"extent.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
    perfor.factor <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">perfor.factor</span>, <span class="st">"Perforated cancer"</span><span class="op">)</span>
  <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, cont <span class="op">=</span> <span class="st">"median"</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
    column <span class="op">=</span> <span class="cn">TRUE</span>, total_col <span class="op">=</span> <span class="cn">TRUE</span>, add_dependent_label <span class="op">=</span> <span class="cn">TRUE</span>, dependent_label_prefix <span class="op">=</span> <span class="st">""</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="12%">
<col width="9%">
<col width="14%">
<col width="14%">
<col width="14%">
<col width="14%">
<col width="14%">
<col width="4%">
</colgroup>
<thead><tr class="header">
<th align="left">Extent of spread</th>
<th align="left"></th>
<th align="right">Submucosa</th>
<th align="right">Muscle</th>
<th align="right">Serosa</th>
<th align="right">Adjacent structures</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Median (IQR)</td>
<td align="right">56.0 (50.0 to 64.0)</td>
<td align="right">61.5 (56.0 to 70.0)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">61.0 (53.5 to 66.0)</td>
<td align="right">61.0 (53.0 to 69.0)</td>
<td align="right">0.334</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">2 (9.5)</td>
<td align="right">8 (7.5)</td>
<td align="right">56 (7.4)</td>
<td align="right">4 (9.3)</td>
<td align="right">70 (7.5)</td>
<td align="right">0.338</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">12 (57.1)</td>
<td align="right">32 (30.2)</td>
<td align="right">285 (37.5)</td>
<td align="right">15 (34.9)</td>
<td align="right">344 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">7 (33.3)</td>
<td align="right">66 (62.3)</td>
<td align="right">418 (55.1)</td>
<td align="right">24 (55.8)</td>
<td align="right">515 (55.4)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">13 (61.9)</td>
<td align="right">47 (44.3)</td>
<td align="right">366 (48.2)</td>
<td align="right">19 (44.2)</td>
<td align="right">445 (47.9)</td>
<td align="right">0.483</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">8 (38.1)</td>
<td align="right">59 (55.7)</td>
<td align="right">393 (51.8)</td>
<td align="right">24 (55.8)</td>
<td align="right">484 (52.1)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">20 (95.2)</td>
<td align="right">88 (83.0)</td>
<td align="right">588 (77.5)</td>
<td align="right">36 (83.7)</td>
<td align="right">732 (78.8)</td>
<td align="right">0.040</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">1 (4.8)</td>
<td align="right">13 (12.3)</td>
<td align="right">157 (20.7)</td>
<td align="right">5 (11.6)</td>
<td align="right">176 (18.9)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">5 (4.7)</td>
<td align="right">14 (1.8)</td>
<td align="right">2 (4.7)</td>
<td align="right">21 (2.3)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="missing-data-in-the-dependent">1.22 Missing data in the dependent<a class="anchor" aria-label="anchor" href="#missing-data-in-the-dependent"></a>
</h3>
<p>If you are careful to count totals and you know your data, you should
realise when there is data missing from the dependent, e.g.:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_glimpse.html">ff_glimpse</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span>
<span class="co">#&gt; $Continuous</span>
<span class="co">#&gt;           label var_type   n missing_n missing_percent mean   sd  min</span>
<span class="co">#&gt; age Age (years)    &lt;dbl&gt; 929         0             0.0 59.8 11.9 18.0</span>
<span class="co">#&gt;     quartile_25 median quartile_75  max</span>
<span class="co">#&gt; age        53.0   61.0        69.0 85.0</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $Categorical</span>
<span class="co">#&gt;                            label var_type   n missing_n missing_percent</span>
<span class="co">#&gt; mort_5yr        Mortality 5 year    &lt;fct&gt; 915        14             1.5</span>
<span class="co">#&gt; age.factor                   Age    &lt;fct&gt; 929         0             0.0</span>
<span class="co">#&gt; sex.factor                   Sex    &lt;fct&gt; 929         0             0.0</span>
<span class="co">#&gt; obstruct.factor      Obstruction    &lt;fct&gt; 908        21             2.3</span>
<span class="co">#&gt;                 levels_n                                               levels</span>
<span class="co">#&gt; mort_5yr               2                         "Alive", "Died", "(Missing)"</span>
<span class="co">#&gt; age.factor             3 "&lt;40 years", "40-59 years", "60+ years", "(Missing)"</span>
<span class="co">#&gt; sex.factor             2                        "Female", "Male", "(Missing)"</span>
<span class="co">#&gt; obstruct.factor        2                             "No", "Yes", "(Missing)"</span>
<span class="co">#&gt;                 levels_count   levels_percent</span>
<span class="co">#&gt; mort_5yr        511, 404, 14 55.0, 43.5,  1.5</span>
<span class="co">#&gt; age.factor      70, 344, 515  7.5, 37.0, 55.4</span>
<span class="co">#&gt; sex.factor          445, 484           48, 52</span>
<span class="co">#&gt; obstruct.factor 732, 176, 21 78.8, 18.9,  2.3</span></code></pre></div>
<p>To make sure, a warning is generated when data are dropped from the
dependent:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                     total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                     add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>, add_row_totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span>
<span class="co">#&gt; Note: dependent includes missing data. These are dropped.</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="13%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">Missing N</th>
<th align="right">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N (%)</td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">511 (55.8)</td>
<td align="right">404 (44.2)</td>
<td align="right">915</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Age (years)</td>
<td align="left">915 (100.0)</td>
<td align="right">0</td>
<td align="right">Mean (SD)</td>
<td align="right">59.8 (11.4)</td>
<td align="right">59.9 (12.5)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">0.986</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">915 (100.0)</td>
<td align="right">0</td>
<td align="right">&lt;40 years</td>
<td align="right">31 (6.1)</td>
<td align="right">36 (8.9)</td>
<td align="right">67 (7.3)</td>
<td align="right">0.020</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">208 (40.7)</td>
<td align="right">131 (32.4)</td>
<td align="right">339 (37.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">272 (53.2)</td>
<td align="right">237 (58.7)</td>
<td align="right">509 (55.6)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">915 (100.0)</td>
<td align="right">0</td>
<td align="right">Female</td>
<td align="right">243 (47.6)</td>
<td align="right">194 (48.0)</td>
<td align="right">437 (47.8)</td>
<td align="right">0.941</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">268 (52.4)</td>
<td align="right">210 (52.0)</td>
<td align="right">478 (52.2)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">894 (97.7)</td>
<td align="right">21</td>
<td align="right">No</td>
<td align="right">408 (79.8)</td>
<td align="right">312 (77.2)</td>
<td align="right">720 (78.7)</td>
<td align="right">0.219</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">89 (17.4)</td>
<td align="right">85 (21.0)</td>
<td align="right">174 (19.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">14 (2.7)</td>
<td align="right">7 (1.7)</td>
<td align="right">21 (2.3)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
<p>You may consider making the missing data explicit.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
        mort_5yr <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_na_value_to_level.html" class="external-link">fct_na_value_to_level</a></span><span class="op">(</span><span class="va">mort_5yr</span>, level <span class="op">=</span> <span class="st">"(Missing)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                     total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                     add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>, add_row_totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="12%">
<col width="12%">
<col width="10%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">Missing N</th>
<th align="right">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">(Missing)</th>
<th align="right">Total</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N (%)</td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">511 (55.0)</td>
<td align="right">404 (43.5)</td>
<td align="right">14 (1.5)</td>
<td align="right">929</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Age (years)</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">Mean (SD)</td>
<td align="right">59.8 (11.4)</td>
<td align="right">59.9 (12.5)</td>
<td align="right">53.9 (12.7)</td>
<td align="right">59.8 (11.9)</td>
<td align="left">0.185</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">&lt;40 years</td>
<td align="right">31 (6.1)</td>
<td align="right">36 (8.9)</td>
<td align="right">3 (21.4)</td>
<td align="right">70 (7.5)</td>
<td align="left">0.018</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">208 (40.7)</td>
<td align="right">131 (32.4)</td>
<td align="right">5 (35.7)</td>
<td align="right">344 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">272 (53.2)</td>
<td align="right">237 (58.7)</td>
<td align="right">6 (42.9)</td>
<td align="right">515 (55.4)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">929 (100.0)</td>
<td align="right">0</td>
<td align="right">Female</td>
<td align="right">243 (47.6)</td>
<td align="right">194 (48.0)</td>
<td align="right">8 (57.1)</td>
<td align="right">445 (47.9)</td>
<td align="left">0.776</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">268 (52.4)</td>
<td align="right">210 (52.0)</td>
<td align="right">6 (42.9)</td>
<td align="right">484 (52.1)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">908 (97.7)</td>
<td align="right">21</td>
<td align="right">No</td>
<td align="right">408 (79.8)</td>
<td align="right">312 (77.2)</td>
<td align="right">12 (85.7)</td>
<td align="right">732 (78.8)</td>
<td align="left">0.373</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">89 (17.4)</td>
<td align="right">85 (21.0)</td>
<td align="right">2 (14.3)</td>
<td align="right">176 (18.9)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">14 (2.7)</td>
<td align="right">7 (1.7)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="directly-include-missing-data-in-dependent">1.23 Directly include missing data in dependent<a class="anchor" aria-label="anchor" href="#directly-include-missing-data-in-dependent"></a>
</h3>
<p>Rather than making the data explicit in the dataset, you can use
<code>na_include_dependent = TRUE</code> to do the same in
<code><a href="../reference/summary_factorlist.html">summary_factorlist()</a></code>.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, 
                                     na_include <span class="op">=</span> <span class="cn">TRUE</span>, na_include_dependent <span class="op">=</span> <span class="cn">TRUE</span>,
                                     total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                     add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>, add_row_totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="12%">
<col width="12%">
<col width="10%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">Missing N</th>
<th align="right">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">(Missing)</th>
<th align="right">Total</th>
<th align="left">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N (%)</td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">511 (55.0)</td>
<td align="right">404 (43.5)</td>
<td align="right">14 (1.5)</td>
<td align="right">929</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Age (years)</td>
<td align="left">915 (100.0)</td>
<td align="right">0</td>
<td align="right">Mean (SD)</td>
<td align="right">59.8 (11.4)</td>
<td align="right">59.9 (12.5)</td>
<td align="right">53.9 (12.7)</td>
<td align="right">59.8 (11.9)</td>
<td align="left">0.986</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">915 (100.0)</td>
<td align="right">0</td>
<td align="right">&lt;40 years</td>
<td align="right">31 (6.1)</td>
<td align="right">36 (8.9)</td>
<td align="right">3 (21.4)</td>
<td align="right">70 (7.5)</td>
<td align="left">0.020</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">208 (40.7)</td>
<td align="right">131 (32.4)</td>
<td align="right">5 (35.7)</td>
<td align="right">344 (37.0)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">272 (53.2)</td>
<td align="right">237 (58.7)</td>
<td align="right">6 (42.9)</td>
<td align="right">515 (55.4)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">915 (100.0)</td>
<td align="right">0</td>
<td align="right">Female</td>
<td align="right">243 (47.6)</td>
<td align="right">194 (48.0)</td>
<td align="right">8 (57.1)</td>
<td align="right">445 (47.9)</td>
<td align="left">0.941</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">268 (52.4)</td>
<td align="right">210 (52.0)</td>
<td align="right">6 (42.9)</td>
<td align="right">484 (52.1)</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">894 (97.7)</td>
<td align="right">21</td>
<td align="right">No</td>
<td align="right">408 (79.8)</td>
<td align="right">312 (77.2)</td>
<td align="right">12 (85.7)</td>
<td align="right">732 (78.8)</td>
<td align="left">0.219</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">89 (17.4)</td>
<td align="right">85 (21.0)</td>
<td align="right">2 (14.3)</td>
<td align="right">176 (18.9)</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">14 (2.7)</td>
<td align="right">7 (1.7)</td>
<td align="right">0 (0.0)</td>
<td align="right">21 (2.3)</td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="summarise-complete-cases">1.24 Summarise complete cases<a class="anchor" aria-label="anchor" href="#summarise-complete-cases"></a>
</h3>
<p>You may wish to see summaries for complete cases across included
variables. Rather than selecting including variables and
<code>drop_na()</code>, you can pass
<code>na_complete_cases = TRUE</code> to
<code><a href="../reference/summary_factorlist.html">summary_factorlist()</a></code> to do the same.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, 
                                     na_complete_cases <span class="op">=</span> <span class="cn">TRUE</span>,
                                     total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                     add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>, add_row_totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span>
<span class="co">#&gt; Note: dependent includes missing data. These are dropped.</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="12%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">Missing N</th>
<th align="right">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N (%)</td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">467 (55.7)</td>
<td align="right">372 (44.3)</td>
<td align="right">839</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Age (years)</td>
<td align="left">839 (91.7)</td>
<td align="right">76</td>
<td align="right">Mean (SD)</td>
<td align="right">59.6 (11.5)</td>
<td align="right">60.0 (12.3)</td>
<td align="right">59.8 (11.9)</td>
<td align="right">0.986</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">839 (91.7)</td>
<td align="right">76</td>
<td align="right">&lt;40 years</td>
<td align="right">30 (6.4)</td>
<td align="right">30 (8.1)</td>
<td align="right">60 (7.2)</td>
<td align="right">0.020</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">190 (40.7)</td>
<td align="right">122 (32.8)</td>
<td align="right">312 (37.2)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">247 (52.9)</td>
<td align="right">220 (59.1)</td>
<td align="right">467 (55.7)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">839 (91.7)</td>
<td align="right">76</td>
<td align="right">Female</td>
<td align="right">223 (47.8)</td>
<td align="right">183 (49.2)</td>
<td align="right">406 (48.4)</td>
<td align="right">0.941</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">244 (52.2)</td>
<td align="right">189 (50.8)</td>
<td align="right">433 (51.6)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">839 (91.7)</td>
<td align="right">76</td>
<td align="right">No</td>
<td align="right">381 (81.6)</td>
<td align="right">296 (79.6)</td>
<td align="right">677 (80.7)</td>
<td align="right">0.219</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">86 (18.4)</td>
<td align="right">76 (20.4)</td>
<td align="right">162 (19.3)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="actively-dropping-missing-data-and-tidyverse-functions-that-strip-attributes">1.25 Actively dropping missing data (and tidyverse functions that
strip attributes)<a class="anchor" aria-label="anchor" href="#actively-dropping-missing-data-and-tidyverse-functions-that-strip-attributes"></a>
</h3>
<p>You may wish to actively remove any rows with missing data, so you
are explicit around which data are being used in models. Unfortunately
some tidyverse functions silently remove variable attributes (labels).
This is complained about then put right. But here is a workaround if it
is happening with a variable you wish to use, such as
<code><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">tidyr::drop_na()</a></code>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">vlabels</span> <span class="op">=</span> <span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/extract_variable_label.html">extract_variable_label</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Silently removes attributes</span>
    <span class="fu"><a href="../reference/ff_relabel.html">ff_relabel</a></span><span class="op">(</span><span class="va">vlabels</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Relabel</span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, na_include <span class="op">=</span> <span class="cn">TRUE</span>,
                                     total_col <span class="op">=</span> <span class="cn">TRUE</span>,
                                     add_col_totals <span class="op">=</span> <span class="cn">TRUE</span>, add_row_totals <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="13%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">label</th>
<th align="left">Total N</th>
<th align="right">Missing N</th>
<th align="right">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">Total</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Total N (%)</td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right">497 (55.6)</td>
<td align="right">397 (44.4)</td>
<td align="right">894</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Age (years)</td>
<td align="left">894 (100.0)</td>
<td align="right">0</td>
<td align="right">Mean (SD)</td>
<td align="right">59.7 (11.5)</td>
<td align="right">59.9 (12.5)</td>
<td align="right">59.7 (11.9)</td>
<td align="right">0.791</td>
</tr>
<tr class="odd">
<td align="left">Age</td>
<td align="left">894 (100.0)</td>
<td align="right">0</td>
<td align="right">&lt;40 years</td>
<td align="right">31 (6.2)</td>
<td align="right">35 (8.8)</td>
<td align="right">66 (7.4)</td>
<td align="right">0.024</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">40-59 years</td>
<td align="right">203 (40.8)</td>
<td align="right">129 (32.5)</td>
<td align="right">332 (37.1)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">60+ years</td>
<td align="right">263 (52.9)</td>
<td align="right">233 (58.7)</td>
<td align="right">496 (55.5)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">894 (100.0)</td>
<td align="right">0</td>
<td align="right">Female</td>
<td align="right">237 (47.7)</td>
<td align="right">192 (48.4)</td>
<td align="right">429 (48.0)</td>
<td align="right">0.894</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Male</td>
<td align="right">260 (52.3)</td>
<td align="right">205 (51.6)</td>
<td align="right">465 (52.0)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">894 (100.0)</td>
<td align="right">0</td>
<td align="right">No</td>
<td align="right">408 (82.1)</td>
<td align="right">312 (78.6)</td>
<td align="right">720 (80.5)</td>
<td align="right">0.219</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">Yes</td>
<td align="right">89 (17.9)</td>
<td align="right">85 (21.4)</td>
<td align="right">174 (19.5)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right">(Missing)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right">0 (0.0)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="explanatory-variable-defaults-to-factor-when-5-distinct-values">1.26 Explanatory variable defaults to factor when ≤5 distinct
values<a class="anchor" aria-label="anchor" href="#explanatory-variable-defaults-to-factor-when-5-distinct-values"></a>
</h3>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>

<span class="co"># Here, `extent` is a continuous variable with 4 distinct values. </span>
<span class="co"># Any continuous variable with 5 or fewer unique values is converted silently to factor </span>
<span class="co"># e.g.</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"extent"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">extent</td>
<td align="left">1</td>
<td align="right">16 (3.1)</td>
<td align="right">4 (1.0)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">2</td>
<td align="right">78 (15.3)</td>
<td align="right">25 (6.2)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">3</td>
<td align="right">401 (78.5)</td>
<td align="right">349 (86.4)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">4</td>
<td align="right">16 (3.1)</td>
<td align="right">26 (6.4)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="keep-as-continous-variable-when-5-distinct-values">1.27 Keep as continous variable when ≤5 distinct values<a class="anchor" aria-label="anchor" href="#keep-as-continous-variable-when-5-distinct-values"></a>
</h3>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>

<span class="co"># Here, `extent` is a continuous variable with 4 distinct values. </span>
<span class="co"># Any continuous variable with 5 or fewer unique values is converted silently to factor </span>
<span class="co"># e.g.</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"extent"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, 
                                     cont_cut <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">Alive</th>
<th align="right">Died</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">extent</td>
<td align="left">Mean (SD)</td>
<td align="right">2.8 (0.5)</td>
<td align="right">3.0 (0.4)</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="stratified-crosstables">1.28 Stratified crosstables<a class="anchor" aria-label="anchor" href="#stratified-crosstables"></a>
</h3>
<p>I’ve been meaning to include support for table stratification for a
while. I have delayed for a good reason. Perhaps the most
straightforward way to implement stratificiation is with
<code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code>. However, the non-standard evaluation
required for multiple strata may confuse as it is not implemented else
where in the package.</p>
<p>This translates to whether variable names are passed in quotes or
not.</p>
<p>Here is a solution, which while not that pretty, is effective.</p>
<p>Note that <code>tidyverse</code> functions every so often start
stripping labels/attributes. Hence the addition of the help
function.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>

<span class="co"># Pick option below</span>
<span class="va">split</span> <span class="op">=</span> <span class="st">"rx.factor"</span>
<span class="va">split</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"rx.factor"</span>, <span class="st">"node4.factor"</span><span class="op">)</span>

<span class="co"># Piped function to generate stratified crosstabs table</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="op">!</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/tidyeval-compat.html" class="external-link">syms</a></span><span class="op">(</span><span class="va">split</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Looks awkward, but avoids unquoted var names</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_map.html" class="external-link">group_modify</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">.x</span>, <span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/ff_stratify_helper.html">ff_stratify_helper</a></span><span class="op">(</span><span class="va">colon_s</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="27%">
<col width="9%">
<col width="18%">
<col width="16%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">Treatment</th>
<th align="left">&gt;4 positive nodes</th>
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Obs</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">&lt;40 years</td>
<td align="right">14 (6.3)</td>
<td align="right">0 (0.0)</td>
</tr>
<tr class="even">
<td align="left">Obs</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">89 (40.3)</td>
<td align="right">3 (42.9)</td>
</tr>
<tr class="odd">
<td align="left">Obs</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">118 (53.4)</td>
<td align="right">4 (57.1)</td>
</tr>
<tr class="even">
<td align="left">Obs</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">Female</td>
<td align="right">101 (45.7)</td>
<td align="right">3 (42.9)</td>
</tr>
<tr class="odd">
<td align="left">Obs</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">Male</td>
<td align="right">120 (54.3)</td>
<td align="right">4 (57.1)</td>
</tr>
<tr class="even">
<td align="left">Obs</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">&lt;40 years</td>
<td align="right">10 (11.8)</td>
<td align="right">1 (50.0)</td>
</tr>
<tr class="odd">
<td align="left">Obs</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">31 (36.5)</td>
<td align="right">1 (50.0)</td>
</tr>
<tr class="even">
<td align="left">Obs</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">44 (51.8)</td>
<td align="right">0 (0.0)</td>
</tr>
<tr class="odd">
<td align="left">Obs</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">Female</td>
<td align="right">44 (51.8)</td>
<td align="right">1 (50.0)</td>
</tr>
<tr class="even">
<td align="left">Obs</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">Male</td>
<td align="right">41 (48.2)</td>
<td align="right">1 (50.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">&lt;40 years</td>
<td align="right">14 (6.5)</td>
<td align="right">0 (0.0)</td>
</tr>
<tr class="even">
<td align="left">Lev</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">78 (36.3)</td>
<td align="right">3 (50.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">123 (57.2)</td>
<td align="right">3 (50.0)</td>
</tr>
<tr class="even">
<td align="left">Lev</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">Female</td>
<td align="right">89 (41.4)</td>
<td align="right">2 (33.3)</td>
</tr>
<tr class="odd">
<td align="left">Lev</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">Male</td>
<td align="right">126 (58.6)</td>
<td align="right">4 (66.7)</td>
</tr>
<tr class="even">
<td align="left">Lev</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">&lt;40 years</td>
<td align="right">4 (4.7)</td>
<td align="right">1 (25.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">33 (38.8)</td>
<td align="right">1 (25.0)</td>
</tr>
<tr class="even">
<td align="left">Lev</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">48 (56.5)</td>
<td align="right">2 (50.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">Female</td>
<td align="right">39 (45.9)</td>
<td align="right">3 (75.0)</td>
</tr>
<tr class="even">
<td align="left">Lev</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">Male</td>
<td align="right">46 (54.1)</td>
<td align="right">1 (25.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev+5FU</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">&lt;40 years</td>
<td align="right">15 (6.9)</td>
<td align="right">0 (0.0)</td>
</tr>
<tr class="even">
<td align="left">Lev+5FU</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">72 (33.2)</td>
<td align="right">2 (25.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev+5FU</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">130 (59.9)</td>
<td align="right">6 (75.0)</td>
</tr>
<tr class="even">
<td align="left">Lev+5FU</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">Female</td>
<td align="right">115 (53.0)</td>
<td align="right">4 (50.0)</td>
</tr>
<tr class="odd">
<td align="left">Lev+5FU</td>
<td align="left">No</td>
<td align="left"></td>
<td align="left">Male</td>
<td align="right">102 (47.0)</td>
<td align="right">4 (50.0)</td>
</tr>
<tr class="even">
<td align="left">Lev+5FU</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">&lt;40 years</td>
<td align="right">11 (13.9)</td>
<td align="right">0 (NaN)</td>
</tr>
<tr class="odd">
<td align="left">Lev+5FU</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">31 (39.2)</td>
<td align="right">0 (NaN)</td>
</tr>
<tr class="even">
<td align="left">Lev+5FU</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">37 (46.8)</td>
<td align="right">0 (NaN)</td>
</tr>
<tr class="odd">
<td align="left">Lev+5FU</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">Female</td>
<td align="right">44 (55.7)</td>
<td align="right">0 (NaN)</td>
</tr>
<tr class="even">
<td align="left">Lev+5FU</td>
<td align="left">Yes</td>
<td align="left"></td>
<td align="left">Male</td>
<td align="right">35 (44.3)</td>
<td align="right">0 (NaN)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="digits-decimal-places">1.29 Digits / decimal places<a class="anchor" aria-label="anchor" href="#digits-decimal-places"></a>
</h3>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, p <span class="op">=</span> <span class="cn">TRUE</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">p</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.91)</td>
<td align="right">58.4 (13.30)</td>
<td align="right">0.542</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">68 (7.5388)</td>
<td align="right">2 (7.4074)</td>
<td align="right">1.000</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">334 (37.0288)</td>
<td align="right">10 (37.0370)</td>
<td align="right"></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">500 (55.4324)</td>
<td align="right">15 (55.5556)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">432 (47.8936)</td>
<td align="right">13 (48.1481)</td>
<td align="right">1.000</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">470 (52.1064)</td>
<td align="right">14 (51.8519)</td>
<td align="right"></td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">715 (81.1578)</td>
<td align="right">17 (62.9630)</td>
<td align="right">0.035</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">166 (18.8422)</td>
<td align="right">10 (37.0370)</td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="weighted-tables">1.30 Weighted tables<a class="anchor" aria-label="anchor" href="#weighted-tables"></a>
</h3>
<p>A simple weighting can be applied to tables. Explanatory continuous
variables are multiplied by weights. Explanatory categorical variables
are counted with a frequency weight (<code>sum(weights)</code>). This
could be used with, say, inverse probability of treatment weightings
(IPTW). The example uses random weights for demonstration purposes only.
Hypothesis tests are not run on weighted data, p is set to FALSE.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"perfor.factor"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>my_weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">929</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># Random just to demonstrate</span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, weights <span class="op">=</span> <span class="st">"my_weights"</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">3</span>, <span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span><span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">label</th>
<th align="left">levels</th>
<th align="right">No</th>
<th align="right">Yes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.8)</td>
<td align="right">55.9 (13.6)</td>
</tr>
<tr class="even">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31.9 (7.2)</td>
<td align="right">1.5 (9.2)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">166.0 (37.2)</td>
<td align="right">7.3 (44.0)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">248.1 (55.6)</td>
<td align="right">7.7 (46.8)</td>
</tr>
<tr class="odd">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">209.3 (46.9)</td>
<td align="right">6.4 (38.9)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">236.8 (53.1)</td>
<td align="right">10.1 (61.1)</td>
</tr>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">351.4 (80.7)</td>
<td align="right">8.8 (53.3)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">84.2 (19.3)</td>
<td align="right">7.7 (46.7)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="model-tables-with-finalfit">2 Model tables with <code>finalfit()</code><a class="anchor" aria-label="anchor" href="#model-tables-with-finalfit"></a>
</h2>
<div class="section level3">
<h3 id="default-1">2.01 Default<a class="anchor" aria-label="anchor" href="#default-1"></a>
</h3>
<p>Logistic regression first.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="hide-reference-levels">2.02 Hide reference levels<a class="anchor" aria-label="anchor" href="#hide-reference-levels"></a>
</h3>
<p>Most appropriate when all explanatory variables are continuous or
well-known binary variables, such as sex.</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, add_dependent_label <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_remove_ref.html">ff_remove_ref</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span><span class="op">)</span><span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="8%">
<col width="10%">
<col width="10%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.4)</td>
<td align="right">59.9 (12.5)</td>
<td align="right">1.00 (0.99-1.01, p=0.986)</td>
<td align="right">1.00 (0.99-1.01, p=0.983)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.76-1.27, p=0.888)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="model-metrics">2.03 Model metrics<a class="anchor" aria-label="anchor" href="#model-metrics"></a>
</h3>
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, metrics <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
</tr>
</tbody>
</table>
<table class="table">
<colgroup><col width="100%"></colgroup>
<tbody><tr class="odd">
<td align="left">Number in dataframe = 929, Number in model = 894,
Missing = 35, AIC = 1230.7, C-statistic = 0.56, H&amp;L = Chi-sq(8) 5.69
(p=0.682)</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="model-metrics-can-be-applied-to-all-supported-base-models">2.04 Model metrics can be applied to all supported base models<a class="anchor" aria-label="anchor" href="#model-metrics-can-be-applied-to-all-supported-base-models"></a>
</h3>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span><span class="va">mort_5yr</span> <span class="op">~</span> <span class="va">age.factor</span> <span class="op">+</span> <span class="va">sex.factor</span> <span class="op">+</span> <span class="va">obstruct.factor</span> <span class="op">+</span> <span class="va">perfor.factor</span>, data <span class="op">=</span> <span class="va">colon_s</span>, family <span class="op">=</span> <span class="st">"binomial"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_metrics.html">ff_metrics</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup><col width="100%"></colgroup>
<tbody><tr class="odd">
<td align="left">Number in dataframe = 929, Number in model = 894,
Missing = 35, AIC = 1230.7, C-statistic = 0.56, H&amp;L = Chi-sq(8) 5.69
(p=0.682)</td>
</tr></tbody>
</table>
</div>
<div class="section level3">
<h3 id="reduced-model">2.05 Reduced model<a class="anchor" aria-label="anchor" href="#reduced-model"></a>
</h3>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">explanatory_multi</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, <span class="va">explanatory_multi</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.424)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.26 (0.90-1.76, p=0.176)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">-</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="include-all-models">2.06 Include all models<a class="anchor" aria-label="anchor" href="#include-all-models"></a>
</h3>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">explanatory_multi</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"obstruct.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, <span class="va">explanatory_multi</span>, metrics <span class="op">=</span> <span class="cn">TRUE</span>, keep_models <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="18%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable full)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
<td align="right">0.81 (0.48-1.36, p=0.424)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
<td align="right">1.26 (0.90-1.76, p=0.176)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
<td align="right">-</td>
</tr>
</tbody>
</table>
<table class="table kable_wrapper"><tbody><tr>
<td>
<table class="table">
<colgroup><col width="100%"></colgroup>
<tbody><tr class="odd">
<td align="left">Number in dataframe = 929, Number in model = 894,
Missing = 35, AIC = 1230.7, C-statistic = 0.56, H&amp;L = Chi-sq(8) 5.69
(p=0.682)</td>
</tr></tbody>
</table>
</td>
<td>
<table class="table">
<colgroup><col width="100%"></colgroup>
<tbody><tr class="odd">
<td align="left">Number in dataframe = 929, Number in model = 894,
Missing = 35, AIC = 1226.8, C-statistic = 0.555, H&amp;L = Chi-sq(8)
0.06 (p=1.000)</td>
</tr></tbody>
</table>
</td>
</tr></tbody></table>
</div>
<div class="section level3">
<h3 id="interactions">2.06 Interactions<a class="anchor" aria-label="anchor" href="#interactions"></a>
</h3>
<p>Interactions can be specified in the normal way. Formatting the
output is trickier. At the moment, we have left the default model
output. This can be adjusted as necessary.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor*sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="30%">
<col width="9%">
<col width="8%">
<col width="8%">
<col width="21%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.65 (0.32-1.34, p=0.241)</td>
<td align="right">0.66 (0.32-1.36, p=0.258)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.80 (0.40-1.61, p=0.529)</td>
<td align="right">0.85 (0.42-1.71, p=0.647)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">1.24 (0.47-3.30, p=0.665)</td>
<td align="right">1.17 (0.44-3.15, p=0.752)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.26 (0.90-1.76, p=0.182)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.11 (0.50-2.41, p=0.795)</td>
</tr>
<tr class="even">
<td align="left">age.factor40-59 years:sex.factorMale</td>
<td align="left">Interaction</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">0.68 (0.23-1.97, p=0.479)</td>
<td align="right">0.74 (0.25-2.18, p=0.588)</td>
</tr>
<tr class="odd">
<td align="left">age.factor60+ years:sex.factorMale</td>
<td align="left">Interaction</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">0.86 (0.30-2.39, p=0.766)</td>
<td align="right">0.89 (0.31-2.51, p=0.822)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="interactions-create-interaction-variable-with-two-factors">2.07 Interactions: create interaction variable with two factors<a class="anchor" aria-label="anchor" href="#interactions-create-interaction-variable-with-two-factors"></a>
</h3>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="co">#explanatory = c("age.factor*sex.factor", "obstruct.factor", "perfor.factor")</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/ff_interaction.html">ff_interaction</a></span><span class="op">(</span><span class="va">age.factor</span>, <span class="va">sex.factor</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">explanatory</span>, <span class="st">"age.factor_sex.factor"</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="23%">
<col width="15%">
<col width="9%">
<col width="9%">
<col width="21%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.26 (0.90-1.76, p=0.182)</td>
</tr>
<tr class="odd">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.11 (0.50-2.41, p=0.795)</td>
</tr>
<tr class="odd">
<td align="left">Age:Sex</td>
<td align="left">&lt;40 years_Female</td>
<td align="right">18 (48.6)</td>
<td align="right">19 (51.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">&lt;40 years_Male</td>
<td align="right">13 (43.3)</td>
<td align="right">17 (56.7)</td>
<td align="right">1.24 (0.47-3.30, p=0.665)</td>
<td align="right">1.17 (0.44-3.15, p=0.752)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">40-59 years_Female</td>
<td align="right">96 (59.3)</td>
<td align="right">66 (40.7)</td>
<td align="right">0.65 (0.32-1.34, p=0.241)</td>
<td align="right">0.66 (0.32-1.36, p=0.258)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years_Male</td>
<td align="right">112 (63.3)</td>
<td align="right">65 (36.7)</td>
<td align="right">0.55 (0.27-1.12, p=0.100)</td>
<td align="right">0.57 (0.28-1.18, p=0.129)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years_Female</td>
<td align="right">129 (54.2)</td>
<td align="right">109 (45.8)</td>
<td align="right">0.80 (0.40-1.61, p=0.529)</td>
<td align="right">0.85 (0.42-1.71, p=0.647)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">60+ years_Male</td>
<td align="right">143 (52.8)</td>
<td align="right">128 (47.2)</td>
<td align="right">0.85 (0.42-1.69, p=0.638)</td>
<td align="right">0.88 (0.44-1.77, p=0.725)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="dependent-name">2.08 Dependent name<a class="anchor" aria-label="anchor" href="#dependent-name"></a>
</h3>
<p>The dependent name cannot be specified directly intentionally. This
is to prevent errors when copying code. Re-label using
<code><a href="../reference/ff_label.html">ff_label()</a></code>. The dependent prefix and suffix can also be
altered.</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
        mort_5yr <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">mort_5yr</span>, <span class="st">"5-year mortality"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, dependent_label_prefix <span class="op">=</span> <span class="st">""</span>,
                     dependent_label_suffix <span class="op">=</span> <span class="st">" (full model)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="25%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">5-year mortality (full model)</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="estimate-name">2.09 Estimate name<a class="anchor" aria-label="anchor" href="#estimate-name"></a>
</h3>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, estimate_name <span class="op">=</span> <span class="st">"Odds ratio"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">Odds ratio (univariable)</th>
<th align="right">Odds ratio (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="digits-decimal-places-1">2.10 Digits / decimal places<a class="anchor" aria-label="anchor" href="#digits-decimal-places-1"></a>
</h3>
<p>Number of digits to round to regression results. (1) estimate, (2)
confidence interval limits, (3) p-value. Default is c(2,2,3). Trailing
zeros are preserved. Number of decimal places for counts and mean (sd) /
median (IQR) not currently supported. Defaults are senisble :)</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="22%">
<col width="9%">
<col width="9%">
<col width="9%">
<col width="24%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.542 (0.319-0.918, p=0.0230)</td>
<td align="right">0.574 (0.335-0.978, p=0.0412)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.750 (0.448-1.250, p=0.2704)</td>
<td align="right">0.810 (0.481-1.360, p=0.4261)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.981 (0.756-1.275, p=0.8886)</td>
<td align="right">0.983 (0.754-1.283, p=0.9023)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.249 (0.896-1.741, p=0.1892)</td>
<td align="right">1.255 (0.896-1.757, p=0.1859)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.180 (0.542-2.553, p=0.6716)</td>
<td align="right">1.122 (0.512-2.442, p=0.7699)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="confidence-interval-type">2.11 Confidence interval type<a class="anchor" aria-label="anchor" href="#confidence-interval-type"></a>
</h3>
<p>One of <code>c("profile", "default")</code> for GLM models
(<code>confint.glm()</code>). Note, a little awkwardly, the ‘default’
setting is <code>profile</code>, rather than <code>default</code>.
Profile levels are probably a little more accurate. Only go to default
if taking a significant length of time for profile, i.e. data is greater
than hundreds of thousands of lines.</p>
<p>For glmer/lmer models (<code>confint.merMod()</code>),
<code>c("profile", "Wald", "boot")</code>. Not implemented for
<code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>, <code><a href="https://rdrr.io/pkg/survival/man/coxph.html" class="external-link">coxph()</a></code> or <code>coxphlist</code>, which
use default.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, confint_type <span class="op">=</span> <span class="st">"default"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.55-2.54, p=0.672)</td>
<td align="right">1.12 (0.52-2.43, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="confidence-interval-level">2.12 Confidence interval level<a class="anchor" aria-label="anchor" href="#confidence-interval-level"></a>
</h3>
<p>Probably never change this :) Note, the p-value is intentionally not
included for confidence levels other than 95% to avoid confusion.</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, confint_level <span class="op">=</span> <span class="fl">0.90</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="28%">
<col width="12%">
<col width="11%">
<col width="11%">
<col width="17%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.35-0.84)</td>
<td align="right">0.57 (0.37-0.90)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.49-1.15)</td>
<td align="right">0.81 (0.52-1.25)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.79-1.22)</td>
<td align="right">0.98 (0.79-1.23)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.95-1.65)</td>
<td align="right">1.25 (0.95-1.66)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.62-2.25)</td>
<td align="right">1.12 (0.58-2.15)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="confidence-interval-separation">2.13 Confidence interval separation<a class="anchor" aria-label="anchor" href="#confidence-interval-separation"></a>
</h3>
<p>Some like to avoid the hyphen so as not to confuse with minus sign.
Obviously not an issue in logistic regression.</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, confint_sep <span class="op">=</span> <span class="st">" to "</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="23%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="24%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32 to 0.92, p=0.023)</td>
<td align="right">0.57 (0.34 to 0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45 to 1.25, p=0.270)</td>
<td align="right">0.81 (0.48 to 1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76 to 1.27, p=0.889)</td>
<td align="right">0.98 (0.75 to 1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90 to 1.74, p=0.189)</td>
<td align="right">1.25 (0.90 to 1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54 to 2.55, p=0.672)</td>
<td align="right">1.12 (0.51 to 2.44, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="robust-standard-errors-confidence-intervals">2.14 Robust standard errors / confidence intervals<a class="anchor" aria-label="anchor" href="#robust-standard-errors-confidence-intervals"></a>
</h3>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">'mort_5yr'</span>

<span class="co"># Standard finalfit regression table</span>
<span class="va">t1</span> <span class="op">=</span> <span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, keep_fit_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="co"># GLM with Stata-like robust standard errors</span>
<span class="va">t2</span> <span class="op">=</span> <span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/glmmulti.html">glmmulti</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">lmtest</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lmtest/man/coeftest.html" class="external-link">coeftest</a></span><span class="op">(</span><span class="va">.</span>, vcov <span class="op">=</span> <span class="fu">sandwich</span><span class="fu">::</span><span class="fu"><a href="https://sandwich.R-Forge.R-project.org/reference/vcovHC.html" class="external-link">vcovHC</a></span><span class="op">(</span><span class="va">.</span>, <span class="st">"HC1"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span>conf.int <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/remove_intercept.html">remove_intercept</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">term</span>, <span class="va">estimate</span>, <span class="va">conf.low</span>, <span class="va">conf.high</span>, <span class="va">p.value</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">estimate</span>, <span class="va">conf.low</span>, <span class="va">conf.high</span><span class="op">)</span>, <span class="va">exp</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># or mutate_at(vars())</span>
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
  <span class="fu"><a href="../reference/condense_fit.html">condense_fit</a></span><span class="op">(</span>estimate_name <span class="op">=</span> <span class="st">"OR (multivariable robust SE)"</span><span class="op">)</span>

<span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">t1</span>, <span class="va">t2</span>, last_merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">#&gt; Note: dependent includes missing data. These are dropped.</span>
<span class="co">#&gt; Waiting for profiling to be done...</span>
<span class="co">#&gt; Waiting for profiling to be done...</span>
<span class="co">#&gt; Waiting for profiling to be done...</span></code></pre>
<table class="table">
<colgroup>
<col width="19%">
<col width="6%">
<col width="8%">
<col width="8%">
<col width="18%">
<col width="18%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
<th align="right">OR (multivariable robust SE)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age (years)</td>
<td align="left">Mean (SD)</td>
<td align="right">59.8 (11.4)</td>
<td align="right">59.9 (12.5)</td>
<td align="right">1.00 (0.99-1.01, p=0.986)</td>
<td align="right">1.00 (0.99-1.01, p=0.983)</td>
<td align="right">1.00 (0.99-1.01, p=0.984)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.76-1.27, p=0.888)</td>
<td align="right">0.98 (0.76-1.27, p=0.888)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="remove-p-value">2.15 Remove p-value<a class="anchor" aria-label="anchor" href="#remove-p-value"></a>
</h3>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_remove_p.html">ff_remove_p</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="28%">
<col width="12%">
<col width="11%">
<col width="11%">
<col width="17%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92)</td>
<td align="right">0.57 (0.34-0.98)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25)</td>
<td align="right">0.81 (0.48-1.36)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27)</td>
<td align="right">0.98 (0.75-1.28)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74)</td>
<td align="right">1.25 (0.90-1.76)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55)</td>
<td align="right">1.12 (0.51-2.44)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="mixed-effects-random-intercept-model">2.16 Mixed effects random-intercept model<a class="anchor" aria-label="anchor" href="#mixed-effects-random-intercept-model"></a>
</h3>
<p>At its simplest, a random-intercept model can be specified using a
single quoted variable, e.g. <code>random_effect = "hospital"</code>.
This is equivalent to <code>random_effect = "(1 | hospital)"</code>.
Alternatively you can provide the full specification including
parenthesis,
e.g. <code>random_effect = "(1 | hospital) + (1 | country)"</code>.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"hospital"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, random_effect <span class="op">=</span> <span class="va">random_effect</span>,
                     dependent_label_suffix <span class="op">=</span> <span class="st">" (random intercept)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="35%">
<col width="9%">
<col width="8%">
<col width="8%">
<col width="19%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year (random intercept)</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multilevel)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.75 (0.39-1.44, p=0.382)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">1.03 (0.55-1.96, p=0.916)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.80 (0.58-1.11, p=0.180)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.23 (0.82-1.83, p=0.320)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.03 (0.43-2.51, p=0.940)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="b-mixed-effects-random-intercept-model-with-univariable-estimates-including-random-effects">2.16b Mixed effects random-intercept model with univariable
estimates including random effects<a class="anchor" aria-label="anchor" href="#b-mixed-effects-random-intercept-model-with-univariable-estimates-including-random-effects"></a>
</h3>
<p>Some recently asked about this and it is a good question. Here is an
approach.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"hospital"</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, random_effect <span class="op">=</span> <span class="va">random_effect</span>, keep_fit_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="va">explanatory</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map_df</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="../reference/glmmixed.html">glmmixed</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span>, <span class="va">.x</span>, random_effect <span class="op">=</span> <span class="va">random_effect</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
                                            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (univariable with RE)"</span><span class="op">)</span><span class="op">)</span>, 
        last_merge <span class="op">=</span> <span class="cn">TRUE</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/relocate.html" class="external-link">relocate</a></span><span class="op">(</span><span class="fl">7</span>, .before <span class="op">=</span> <span class="fl">6</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="18%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (univariable with RE)</th>
<th align="right">OR (multilevel)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.68 (0.35-1.30, p=0.239)</td>
<td align="right">0.75 (0.39-1.44, p=0.382)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.93 (0.49-1.74, p=0.809)</td>
<td align="right">1.03 (0.55-1.96, p=0.916)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.81 (0.59-1.12, p=0.201)</td>
<td align="right">0.80 (0.58-1.11, p=0.180)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.23 (0.83-1.83, p=0.310)</td>
<td align="right">1.23 (0.82-1.83, p=0.320)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.07 (0.44-2.57, p=0.888)</td>
<td align="right">1.03 (0.43-2.51, p=0.940)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="mixed-effects-random-slope-model">2.17 Mixed effects random-slope model<a class="anchor" aria-label="anchor" href="#mixed-effects-random-slope-model"></a>
</h3>
<p>In the example below, allow the effect of age on outcome to vary by
hospital. Note, this specification must have parentheses included.</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"(age.factor | hospital)"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, random_effect <span class="op">=</span> <span class="va">random_effect</span>,
                     dependent_label_suffix <span class="op">=</span> <span class="st">" (random slope: age)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="35%">
<col width="8%">
<col width="8%">
<col width="8%">
<col width="19%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year (random slope: age)</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multilevel)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.81 (0.37-1.81, p=0.611)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">1.08 (0.54-2.20, p=0.822)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.80 (0.58-1.11, p=0.179)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.24 (0.83-1.85, p=0.298)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.02 (0.42-2.48, p=0.967)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="mixed-effects-random-slope-model-directly-from-lme4">2.18 Mixed effects random-slope model directly from
<code>lme4</code><a class="anchor" aria-label="anchor" href="#mixed-effects-random-slope-model-directly-from-lme4"></a>
</h3>
<p>Clearly, as models get more complex, parameters such as random effect
group variances may require to be extracted directly from model
outputs.</p>
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"(age.factor | hospital)"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu">lme4</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/lme4/man/glmer.html" class="external-link">glmer</a></span><span class="op">(</span><span class="va">mort_5yr</span> <span class="op">~</span> <span class="va">age.factor</span> <span class="op">+</span> <span class="op">(</span><span class="va">age.factor</span> <span class="op">|</span> <span class="va">hospital</span><span class="op">)</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="exclude-all-missing-data-in-final-model-from-univariable-analyses">2.19 Exclude all missing data in final model from univariable
analyses<a class="anchor" aria-label="anchor" href="#exclude-all-missing-data-in-final-model-from-univariable-analyses"></a>
</h3>
<p>This can be useful if you want the numbers in the final table to
match the final multivariable model. However, be careful to include a
full explanation of this in the methods and the reason for exluding the
missing data.</p>
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">'mort_5yr'</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">explanatory</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (47.0)</td>
<td align="right">35 (53.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">203 (61.1)</td>
<td align="right">129 (38.9)</td>
<td align="right">0.56 (0.33-0.96, p=0.034)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">263 (53.0)</td>
<td align="right">233 (47.0)</td>
<td align="right">0.78 (0.47-1.31, p=0.356)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">237 (55.2)</td>
<td align="right">192 (44.8)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">260 (55.9)</td>
<td align="right">205 (44.1)</td>
<td align="right">0.97 (0.75-1.27, p=0.841)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">483 (55.7)</td>
<td align="right">384 (44.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.17 (0.54-2.53, p=0.691)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="linear-regression">2.20 Linear regression<a class="anchor" aria-label="anchor" href="#linear-regression"></a>
</h3>
<div class="sourceCode" id="cb56"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">'nodes'</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="10%">
<col width="8%">
<col width="8%">
<col width="28%">
<col width="28%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: nodes</th>
<th align="left"></th>
<th align="right">unit</th>
<th align="right">value</th>
<th align="right">Coefficient (univariable)</th>
<th align="right">Coefficient (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">Mean (sd)</td>
<td align="right">4.7 (4.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.3)</td>
<td align="right">-1.14 (-2.08 to -0.21, p=0.016)</td>
<td align="right">-1.21 (-2.16 to -0.26, p=0.012)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.6)</td>
<td align="right">-1.19 (-2.10 to -0.28, p=0.010)</td>
<td align="right">-1.25 (-2.18 to -0.33, p=0.008)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.6)</td>
<td align="right">-0.14 (-0.60 to 0.33, p=0.565)</td>
<td align="right">-0.07 (-0.54 to 0.40, p=0.779)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">Mean (sd)</td>
<td align="right">3.5 (3.2)</td>
<td align="right">-0.24 (-0.83 to 0.36, p=0.435)</td>
<td align="right">-0.31 (-0.91 to 0.29, p=0.313)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">Mean (sd)</td>
<td align="right">3.9 (2.8)</td>
<td align="right">0.24 (-1.13 to 1.61, p=0.735)</td>
<td align="right">0.28 (-1.09 to 1.66, p=0.686)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="mixed-effects-random-intercept-linear-regression">2.21 Mixed effects random-intercept linear regression<a class="anchor" aria-label="anchor" href="#mixed-effects-random-intercept-linear-regression"></a>
</h3>
<div class="sourceCode" id="cb57"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"nodes"</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"hospital"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, random_effect <span class="op">=</span> <span class="va">random_effect</span>,
                     dependent_label_suffix <span class="op">=</span> <span class="st">" (random intercept)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="27%">
<col width="9%">
<col width="7%">
<col width="7%">
<col width="24%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: nodes (random intercept)</th>
<th align="left"></th>
<th align="right">unit</th>
<th align="right">value</th>
<th align="right">Coefficient (univariable)</th>
<th align="right">Coefficient (multilevel)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">Mean (sd)</td>
<td align="right">4.7 (4.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.3)</td>
<td align="right">-1.14 (-2.08 to -0.21, p=0.016)</td>
<td align="right">-0.79 (-1.65 to 0.07, p=0.035)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.6)</td>
<td align="right">-1.19 (-2.10 to -0.28, p=0.010)</td>
<td align="right">-0.98 (-1.81 to -0.14, p=0.011)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.6)</td>
<td align="right">-0.14 (-0.60 to 0.33, p=0.565)</td>
<td align="right">-0.19 (-0.62 to 0.24, p=0.195)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">Mean (sd)</td>
<td align="right">3.5 (3.2)</td>
<td align="right">-0.24 (-0.83 to 0.36, p=0.435)</td>
<td align="right">-0.37 (-0.92 to 0.17, p=0.091)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">Mean (sd)</td>
<td align="right">3.9 (2.8)</td>
<td align="right">0.24 (-1.13 to 1.61, p=0.735)</td>
<td align="right">0.23 (-1.01 to 1.48, p=0.357)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="mixed-effects-random-slope-linear-regression">2.22 Mixed effects random-slope linear regression<a class="anchor" aria-label="anchor" href="#mixed-effects-random-slope-linear-regression"></a>
</h3>
<div class="sourceCode" id="cb58"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"nodes"</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"(age.factor | hospital)"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, random_effect <span class="op">=</span> <span class="va">random_effect</span>,
                     dependent_label_suffix <span class="op">=</span> <span class="st">" (random slope: age)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="27%">
<col width="9%">
<col width="7%">
<col width="7%">
<col width="24%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: nodes (random slope: age)</th>
<th align="left"></th>
<th align="right">unit</th>
<th align="right">value</th>
<th align="right">Coefficient (univariable)</th>
<th align="right">Coefficient (multilevel)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">Mean (sd)</td>
<td align="right">4.7 (4.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.3)</td>
<td align="right">-1.14 (-2.08 to -0.21, p=0.016)</td>
<td align="right">-0.76 (-1.73 to 0.22, p=0.065)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.6)</td>
<td align="right">-1.19 (-2.10 to -0.28, p=0.010)</td>
<td align="right">-0.93 (-1.77 to -0.08, p=0.016)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">Mean (sd)</td>
<td align="right">3.6 (3.6)</td>
<td align="right">-0.14 (-0.60 to 0.33, p=0.565)</td>
<td align="right">-0.19 (-0.62 to 0.24, p=0.196)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">Mean (sd)</td>
<td align="right">3.5 (3.2)</td>
<td align="right">-0.24 (-0.83 to 0.36, p=0.435)</td>
<td align="right">-0.34 (-0.88 to 0.21, p=0.112)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">Mean (sd)</td>
<td align="right">3.7 (3.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">Mean (sd)</td>
<td align="right">3.9 (2.8)</td>
<td align="right">0.24 (-1.13 to 1.61, p=0.735)</td>
<td align="right">0.20 (-1.05 to 1.45, p=0.377)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="cox-proportional-hazards-model-survival-time-to-event">2.23 Cox proportional hazards model (survival / time to event)<a class="anchor" aria-label="anchor" href="#cox-proportional-hazards-model-survival-time-to-event"></a>
</h3>
<div class="sourceCode" id="cb59"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"Surv(time, status)"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="28%">
<col width="11%">
<col width="10%">
<col width="24%">
<col width="24%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Surv(time, status)</th>
<th align="left"></th>
<th align="right">all</th>
<th align="right">HR (univariable)</th>
<th align="right">HR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">70 (7.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">344 (37.0)</td>
<td align="right">0.76 (0.53-1.09, p=0.132)</td>
<td align="right">0.79 (0.55-1.13, p=0.196)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">515 (55.4)</td>
<td align="right">0.93 (0.66-1.31, p=0.668)</td>
<td align="right">0.98 (0.69-1.40, p=0.926)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">445 (47.9)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">484 (52.1)</td>
<td align="right">1.01 (0.84-1.22, p=0.888)</td>
<td align="right">1.02 (0.85-1.23, p=0.812)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">732 (80.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">176 (19.4)</td>
<td align="right">1.29 (1.03-1.62, p=0.028)</td>
<td align="right">1.30 (1.03-1.64, p=0.026)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">902 (97.1)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">27 (2.9)</td>
<td align="right">1.17 (0.70-1.95, p=0.556)</td>
<td align="right">1.08 (0.64-1.81, p=0.785)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="cox-proportional-hazards-model-change-dependent-label">2.24 Cox proportional hazards model: change dependent label<a class="anchor" aria-label="anchor" href="#cox-proportional-hazards-model-change-dependent-label"></a>
</h3>
<p>As above, the dependent label cannot be specfied directly in the
model to avoid errors. However, in survival modelling the surivial
object specification can be long or awkward. Therefore, here is the work
around.</p>
<div class="sourceCode" id="cb60"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"Surv(time, status)"</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, add_dependent_label <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"Overall survival"</span> <span class="op">=</span> <span class="va">label</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">" "</span> <span class="op">=</span> <span class="va">levels</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="18%">
<col width="13%">
<col width="11%">
<col width="28%">
<col width="28%">
</colgroup>
<thead><tr class="header">
<th align="left">Overall survival</th>
<th align="left"></th>
<th align="right">all</th>
<th align="right">HR (univariable)</th>
<th align="right">HR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">70 (7.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">344 (37.0)</td>
<td align="right">0.76 (0.53-1.09, p=0.132)</td>
<td align="right">0.79 (0.55-1.13, p=0.196)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">515 (55.4)</td>
<td align="right">0.93 (0.66-1.31, p=0.668)</td>
<td align="right">0.98 (0.69-1.40, p=0.926)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">445 (47.9)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">484 (52.1)</td>
<td align="right">1.01 (0.84-1.22, p=0.888)</td>
<td align="right">1.02 (0.85-1.23, p=0.812)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">732 (80.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">176 (19.4)</td>
<td align="right">1.29 (1.03-1.62, p=0.028)</td>
<td align="right">1.30 (1.03-1.64, p=0.026)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">902 (97.1)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">27 (2.9)</td>
<td align="right">1.17 (0.70-1.95, p=0.556)</td>
<td align="right">1.08 (0.64-1.81, p=0.785)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="model-tables-manually-using-ff_merge">3 Model tables manually using <code>ff_merge()</code><a class="anchor" aria-label="anchor" href="#model-tables-manually-using-ff_merge"></a>
</h2>
<div class="section level3">
<h3 id="basic-table">3.1 Basic table<a class="anchor" aria-label="anchor" href="#basic-table"></a>
</h3>
<p>Note <code><a href="../reference/summary_factorlist.html">summary_factorlist()</a></code> needs argument,
<code>fit_id = TRUE</code>.</p>
<div class="sourceCode" id="cb61"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>

<span class="co">## Crosstable</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, fit_id<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">table_1</span>

<span class="co">## Univariable</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/glmuni.html">glmuni</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix<span class="op">=</span><span class="st">" (univariable)"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">table_2</span>

<span class="co">## Merge</span>

<span class="va">table_1</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">table_2</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">fit_id</span>, <span class="va">index</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span><span class="op">)</span><span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="31%">
<col width="13%">
<col width="12%">
<col width="12%">
<col width="29%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (6.1)</td>
<td align="right">36 (8.9)</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (40.7)</td>
<td align="right">131 (32.4)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.2)</td>
<td align="right">237 (58.7)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (47.6)</td>
<td align="right">194 (48.0)</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (52.4)</td>
<td align="right">210 (52.0)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (82.1)</td>
<td align="right">312 (78.6)</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (17.9)</td>
<td align="right">85 (21.4)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (97.3)</td>
<td align="right">391 (96.8)</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (2.7)</td>
<td align="right">13 (3.2)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="complex-table-all-in-single-pipe">3.2 Complex table (all in single pipe)<a class="anchor" aria-label="anchor" href="#complex-table-all-in-single-pipe"></a>
</h3>
<div class="sourceCode" id="cb62"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">random_effect</span> <span class="op">=</span> <span class="st">"hospital"</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>

<span class="co"># All in one pipe</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="co">## Crosstable</span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, fit_id<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add univariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/glmuni.html">glmuni</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix<span class="op">=</span><span class="st">" (univariable)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add multivariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/glmmulti.html">glmmulti</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix<span class="op">=</span><span class="st">" (multivariable)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add mixed effects</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/glmmixed.html">glmmixed</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span>, <span class="va">explanatory</span>, <span class="va">random_effect</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix<span class="op">=</span><span class="st">" (multilevel)"</span><span class="op">)</span>,
        last_merge <span class="op">=</span> <span class="cn">TRUE</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="20%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="18%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
<th align="right">OR (multilevel)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (6.1)</td>
<td align="right">36 (8.9)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (40.7)</td>
<td align="right">131 (32.4)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
<td align="right">0.75 (0.39-1.44, p=0.382)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.2)</td>
<td align="right">237 (58.7)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
<td align="right">1.03 (0.55-1.96, p=0.916)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (47.6)</td>
<td align="right">194 (48.0)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (52.4)</td>
<td align="right">210 (52.0)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
<td align="right">0.80 (0.58-1.11, p=0.180)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (82.1)</td>
<td align="right">312 (78.6)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (17.9)</td>
<td align="right">85 (21.4)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
<td align="right">1.23 (0.82-1.83, p=0.320)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (97.3)</td>
<td align="right">391 (96.8)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (2.7)</td>
<td align="right">13 (3.2)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
<td align="right">1.03 (0.43-2.51, p=0.940)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="other-glm-models">3.3 Other GLM models<a class="anchor" aria-label="anchor" href="#other-glm-models"></a>
</h3>
<div class="section level4">
<h4 id="poisson">Poisson<a class="anchor" aria-label="anchor" href="#poisson"></a>
</h4>
<div class="sourceCode" id="cb63"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>

<span class="co">## Dobson (1990) Page 93: Randomized Controlled Trial :</span>
<span class="va">counts</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>,<span class="fl">17</span>,<span class="fl">15</span>,<span class="fl">20</span>,<span class="fl">10</span>,<span class="fl">20</span>,<span class="fl">25</span>,<span class="fl">13</span>,<span class="fl">12</span><span class="op">)</span>
<span class="va">outcome</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">1</span>,<span class="fl">9</span><span class="op">)</span>
<span class="va">treatment</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/gl.html" class="external-link">gl</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span><span class="op">)</span>
<span class="va">d.AD</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span><span class="va">treatment</span>, <span class="va">outcome</span>, <span class="va">counts</span><span class="op">)</span>

<span class="va">dependent</span> <span class="op">=</span> <span class="st">"counts"</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"outcome"</span>, <span class="st">"treatment"</span><span class="op">)</span>

<span class="va">fit_uni</span> <span class="op">=</span> <span class="va">d.AD</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/glmuni.html">glmuni</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, family <span class="op">=</span> <span class="va">poisson</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_name <span class="op">=</span> <span class="st">"Rate ratio (univariable)"</span><span class="op">)</span>

<span class="va">fit_multi</span> <span class="op">=</span> <span class="va">d.AD</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/glmmulti.html">glmmulti</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, family <span class="op">=</span> <span class="va">poisson</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_name <span class="op">=</span> <span class="st">"Rate ratio (multivariable)"</span><span class="op">)</span>

<span class="co"># All in one pipe</span>
<span class="va">d.AD</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="co">## Crosstable</span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, cont <span class="op">=</span> <span class="st">"median"</span>, fit_id<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add univariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_uni</span>, estimate_name <span class="op">=</span> <span class="st">"Rate ratio"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add multivariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_multi</span>, estimate_name <span class="op">=</span> <span class="st">"Rate ratio"</span>,
                     last_merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">d.AD</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="16%">
<col width="2%">
<col width="12%">
<col width="18%">
<col width="24%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: counts</th>
<th align="left"></th>
<th align="right">unit</th>
<th align="right">value</th>
<th align="right">Rate ratio (univariable)</th>
<th align="right">Rate ratio (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">outcome</td>
<td align="left">1</td>
<td align="right">Median (IQR)</td>
<td align="right">20.0 (19.0 to 22.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">2</td>
<td align="right">Median (IQR)</td>
<td align="right">13.0 (11.5 to 15.0)</td>
<td align="right">0.63 (0.42-0.94, p=0.025)</td>
<td align="right">0.63 (0.42-0.94, p=0.025)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">3</td>
<td align="right">Median (IQR)</td>
<td align="right">15.0 (13.5 to 17.5)</td>
<td align="right">0.75 (0.51-1.09, p=0.128)</td>
<td align="right">0.75 (0.51-1.09, p=0.128)</td>
</tr>
<tr class="even">
<td align="left">treatment</td>
<td align="left">1</td>
<td align="right">Median (IQR)</td>
<td align="right">17.0 (16.0 to 17.5)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">2</td>
<td align="right">Median (IQR)</td>
<td align="right">20.0 (15.0 to 20.0)</td>
<td align="right">1.00 (0.67-1.48, p=1.000)</td>
<td align="right">1.00 (0.67-1.48, p=1.000)</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">3</td>
<td align="right">Median (IQR)</td>
<td align="right">13.0 (12.5 to 19.0)</td>
<td align="right">1.00 (0.67-1.48, p=1.000)</td>
<td align="right">1.00 (0.67-1.48, p=1.000)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level4">
<h4 id="gamma">Gamma<a class="anchor" aria-label="anchor" href="#gamma"></a>
</h4>
<div class="sourceCode" id="cb64"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>

<span class="co"># A Gamma example, from McCullagh &amp; Nelder (1989, pp. 300-2)</span>
<span class="va">clotting</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>
    u <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">10</span>,<span class="fl">15</span>,<span class="fl">20</span>,<span class="fl">30</span>,<span class="fl">40</span>,<span class="fl">60</span>,<span class="fl">80</span>,<span class="fl">100</span><span class="op">)</span>,
    lot1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">118</span>,<span class="fl">58</span>,<span class="fl">42</span>,<span class="fl">35</span>,<span class="fl">27</span>,<span class="fl">25</span>,<span class="fl">21</span>,<span class="fl">19</span>,<span class="fl">18</span><span class="op">)</span>,
    lot2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">69</span>,<span class="fl">35</span>,<span class="fl">26</span>,<span class="fl">21</span>,<span class="fl">18</span>,<span class="fl">16</span>,<span class="fl">13</span>,<span class="fl">12</span>,<span class="fl">12</span><span class="op">)</span><span class="op">)</span>

<span class="va">dependent</span> <span class="op">=</span> <span class="st">"lot1"</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="st">"log(u)"</span>

<span class="va">fit_uni</span> <span class="op">=</span> <span class="va">clotting</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/glmuni.html">glmuni</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, family <span class="op">=</span> <span class="va">Gamma</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_name <span class="op">=</span> <span class="st">"Coefficient"</span>, exp <span class="op">=</span> <span class="cn">FALSE</span>, digits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>,<span class="fl">3</span>,<span class="fl">4</span><span class="op">)</span><span class="op">)</span>

<span class="co"># All in one pipe</span>
<span class="va">clotting</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="co">## Crosstable</span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, cont <span class="op">=</span> <span class="st">"median"</span>, fit_id<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add fit</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_uni</span>, last_merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="17%">
<col width="13%">
<col width="14%">
<col width="21%">
<col width="32%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: lot1</th>
<th align="left"></th>
<th align="right">unit</th>
<th align="right">value</th>
<th align="right">Coefficient</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">u</td>
<td align="left">[5.0,100.0]</td>
<td align="right">Median (IQR)</td>
<td align="right">27.0 (21.0 to 42.0)</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">0.015 (0.015-0.016, p&lt;0.0001)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level3">
<h3 id="weighted-regression">3.4 Weighted regression<a class="anchor" aria-label="anchor" href="#weighted-regression"></a>
</h3>
<p>Note this is updated August 2022. Weights can specified from data and
<code><a href="../reference/summary_factorlist.html">summary_factorlist()</a></code> table is now weighted.</p>
<div class="sourceCode" id="cb65"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>myweights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">colon_s</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="co"># random just for example</span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, weights <span class="op">=</span> <span class="st">"myweights"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="31%">
<col width="9%">
<col width="8%">
<col width="8%">
<col width="20%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year (weighted)</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">16 (45.9)</td>
<td align="right">18 (54.1)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">109 (61.9)</td>
<td align="right">67 (38.1)</td>
<td align="right">0.52 (0.25-1.10, p=0.086)</td>
<td align="right">0.55 (0.26-1.17, p=0.120)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">142 (53.6)</td>
<td align="right">123 (46.4)</td>
<td align="right">0.74 (0.35-1.51, p=0.400)</td>
<td align="right">0.79 (0.38-1.63, p=0.520)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">128 (56.7)</td>
<td align="right">98 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">138 (55.6)</td>
<td align="right">110 (44.4)</td>
<td align="right">1.04 (0.73-1.50, p=0.821)</td>
<td align="right">1.02 (0.70-1.47, p=0.928)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">211 (57.0)</td>
<td align="right">159 (43.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">48 (51.6)</td>
<td align="right">45 (48.4)</td>
<td align="right">1.24 (0.79-1.96, p=0.350)</td>
<td align="right">1.26 (0.79-2.00, p=0.330)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">259 (56.0)</td>
<td align="right">204 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">7 (61.9)</td>
<td align="right">4 (38.1)</td>
<td align="right">0.78 (0.22-2.53, p=0.688)</td>
<td align="right">0.72 (0.20-2.34, p=0.588)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="using-base-r-functions">3.5 Using base R functions<a class="anchor" aria-label="anchor" href="#using-base-r-functions"></a>
</h3>
<p>Note <code><a href="../reference/ff_formula.html">ff_formula()</a></code> convenience function to make
multivariable formula (<code>y ~ x1 + x2 + x3</code> etc.) from a
<code>dependent</code> and <code>explanatory</code> vector of names.</p>
<div class="sourceCode" id="cb66"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>

<span class="co"># All in one pipe</span>

<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="co">## Crosstable</span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, fit_id<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>  <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add univariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/glmuni.html">glmuni</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix<span class="op">=</span><span class="st">" (univariable)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co">## Add multivariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span>
            <span class="fu"><a href="../reference/ff_formula.html">ff_formula</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span>, data <span class="op">=</span> <span class="va">colon_s</span>, family <span class="op">=</span> <span class="st">"binomial"</span>, weights <span class="op">=</span> <span class="cn">NULL</span>
        <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix<span class="op">=</span><span class="st">" (multivariable)"</span><span class="op">)</span>,
        last_merge <span class="op">=</span> <span class="cn">TRUE</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">colon_s</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="24%">
<col width="10%">
<col width="9%">
<col width="9%">
<col width="22%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (6.1)</td>
<td align="right">36 (8.9)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (40.7)</td>
<td align="right">131 (32.4)</td>
<td align="right">0.54 (0.32-0.92, p=0.023)</td>
<td align="right">0.57 (0.34-0.98, p=0.041)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.2)</td>
<td align="right">237 (58.7)</td>
<td align="right">0.75 (0.45-1.25, p=0.270)</td>
<td align="right">0.81 (0.48-1.36, p=0.426)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (47.6)</td>
<td align="right">194 (48.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (52.4)</td>
<td align="right">210 (52.0)</td>
<td align="right">0.98 (0.76-1.27, p=0.889)</td>
<td align="right">0.98 (0.75-1.28, p=0.902)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (82.1)</td>
<td align="right">312 (78.6)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (17.9)</td>
<td align="right">85 (21.4)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.25 (0.90-1.76, p=0.186)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (97.3)</td>
<td align="right">391 (96.8)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (2.7)</td>
<td align="right">13 (3.2)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.12 (0.51-2.44, p=0.770)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="edit-table-rows">3.6 Edit table rows<a class="anchor" aria-label="anchor" href="#edit-table-rows"></a>
</h3>
<p>This can be done as any dataframe would be edited.</p>
<div class="sourceCode" id="cb67"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor*sex.factor"</span>, <span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"mort_5yr"</span>

<span class="co"># Run model for term test</span>
<span class="va">fit</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html" class="external-link">glm</a></span><span class="op">(</span>
    <span class="fu"><a href="../reference/ff_formula.html">ff_formula</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span>, 
    data<span class="op">=</span><span class="va">colon_s</span>, family <span class="op">=</span> <span class="va">binomial</span>
<span class="op">)</span>

<span class="co"># Not run</span>
<span class="co">#term_test &lt;- survey::regTermTest(fit, "age.factor:sex.factor")</span>

<span class="co"># Run final table with results of term test</span>
<span class="va">colon_s</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="../reference/finalfit.html">finalfit</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="fu"><a href="https://amices.org/mice/reference/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>
        <span class="st">"age.factor:sex.factor (overall)"</span>,
        <span class="st">"Interaction"</span>,
        <span class="st">"-"</span>,
        <span class="st">"-"</span>,
        <span class="st">"-"</span>,
        <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"p = 0.775"</span><span class="op">)</span>
    <span class="op">)</span><span class="op">)</span><span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="30%">
<col width="9%">
<col width="8%">
<col width="8%">
<col width="21%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: Mortality 5 year</th>
<th align="left"></th>
<th align="right">Alive</th>
<th align="right">Died</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">31 (46.3)</td>
<td align="right">36 (53.7)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">208 (61.4)</td>
<td align="right">131 (38.6)</td>
<td align="right">0.65 (0.32-1.34, p=0.241)</td>
<td align="right">0.66 (0.32-1.36, p=0.258)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">272 (53.4)</td>
<td align="right">237 (46.6)</td>
<td align="right">0.80 (0.40-1.61, p=0.529)</td>
<td align="right">0.85 (0.42-1.71, p=0.647)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">243 (55.6)</td>
<td align="right">194 (44.4)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">268 (56.1)</td>
<td align="right">210 (43.9)</td>
<td align="right">1.24 (0.47-3.30, p=0.665)</td>
<td align="right">1.17 (0.44-3.15, p=0.752)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">408 (56.7)</td>
<td align="right">312 (43.3)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">89 (51.1)</td>
<td align="right">85 (48.9)</td>
<td align="right">1.25 (0.90-1.74, p=0.189)</td>
<td align="right">1.26 (0.90-1.76, p=0.182)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">497 (56.0)</td>
<td align="right">391 (44.0)</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">14 (51.9)</td>
<td align="right">13 (48.1)</td>
<td align="right">1.18 (0.54-2.55, p=0.672)</td>
<td align="right">1.11 (0.50-2.41, p=0.795)</td>
</tr>
<tr class="even">
<td align="left">age.factor40-59 years:sex.factorMale</td>
<td align="left">Interaction</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">0.68 (0.23-1.97, p=0.479)</td>
<td align="right">0.74 (0.25-2.18, p=0.588)</td>
</tr>
<tr class="odd">
<td align="left">age.factor60+ years:sex.factorMale</td>
<td align="left">Interaction</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">0.86 (0.30-2.39, p=0.766)</td>
<td align="right">0.89 (0.31-2.51, p=0.822)</td>
</tr>
<tr class="even">
<td align="left">age.factor:sex.factor (overall)</td>
<td align="left">Interaction</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">p = 0.775</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="base-model-individual-explanatory-variables">3.7 Base model + individual explanatory variables<a class="anchor" aria-label="anchor" href="#base-model-individual-explanatory-variables"></a>
</h3>
<p>This was an email enquiry about how to build on a base model. The
example request was in a survival context.</p>
<p>This has been updated August 2019. We have left the original example
of building the table from scratch as a comparison.</p>
<p><code><a href="../reference/ff_permute.html">ff_permute()</a></code> allows combinations of variables to be
built on a base model. See options on help page to,</p>
<ul>
<li>include the base model and/or the full model,</li>
<li>present the permuted variables at the top or bottom of the
table,</li>
<li>produce separate model tables, or the default which is a single
table.</li>
</ul>
<div class="sourceCode" id="cb68"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>
<span class="va">mydata</span> <span class="op">=</span> <span class="va">colon_s</span>
<span class="va">explanatory_base</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">explanatory_permute</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span>, <span class="st">"node4.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"Surv(time, status)"</span>

<span class="va">mydata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="../reference/ff_permute.html">ff_permute</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory_base</span>, <span class="va">explanatory_permute</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"Overall survival"</span> <span class="op">=</span> <span class="va">`Dependent: Surv(time, status)`</span>, <span class="co"># optional tidying</span>
                 `n (%)` <span class="op">=</span> <span class="st">"all"</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="6%">
<col width="5%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">Overall survival</th>
<th align="left"></th>
<th align="right">n (%)</th>
<th align="right">HR (univariable)</th>
<th align="right">HR (multivariable) 1</th>
<th align="right">HR (multivariable) 2</th>
<th align="right">HR (multivariable) 3</th>
<th align="right">HR (multivariable) 4</th>
<th align="right">HR (multivariable) 5</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">70 (7.5)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">344 (37.0)</td>
<td align="right">0.76 (0.53-1.09, p=0.132)</td>
<td align="right">0.76 (0.53-1.08, p=0.129)</td>
<td align="right">0.79 (0.55-1.13, p=0.198)</td>
<td align="right">0.76 (0.53-1.08, p=0.127)</td>
<td align="right">0.85 (0.59-1.22, p=0.379)</td>
<td align="right">0.90 (0.63-1.30, p=0.590)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">515 (55.4)</td>
<td align="right">0.93 (0.66-1.31, p=0.668)</td>
<td align="right">0.93 (0.66-1.31, p=0.660)</td>
<td align="right">0.98 (0.69-1.40, p=0.931)</td>
<td align="right">0.92 (0.65-1.31, p=0.656)</td>
<td align="right">1.09 (0.77-1.55, p=0.615)</td>
<td align="right">1.19 (0.83-1.69, p=0.346)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">445 (47.9)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">484 (52.1)</td>
<td align="right">1.01 (0.84-1.22, p=0.888)</td>
<td align="right">1.02 (0.85-1.23, p=0.847)</td>
<td align="right">1.02 (0.85-1.24, p=0.803)</td>
<td align="right">1.02 (0.85-1.22, p=0.854)</td>
<td align="right">1.04 (0.87-1.26, p=0.647)</td>
<td align="right">1.05 (0.87-1.27, p=0.597)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">732 (80.6)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">176 (19.4)</td>
<td align="right">1.29 (1.03-1.62, p=0.028)</td>
<td align="right">-</td>
<td align="right">1.31 (1.04-1.64, p=0.022)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">1.35 (1.07-1.70, p=0.011)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">902 (97.1)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">27 (2.9)</td>
<td align="right">1.17 (0.70-1.95, p=0.556)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">1.18 (0.70-1.97, p=0.535)</td>
<td align="right">-</td>
<td align="right">1.16 (0.69-1.94, p=0.581)</td>
</tr>
<tr class="even">
<td align="left">&gt;4 positive nodes</td>
<td align="left">No</td>
<td align="right">674 (72.6)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">255 (27.4)</td>
<td align="right">2.60 (2.15-3.14, p&lt;0.001)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">2.64 (2.18-3.19, p&lt;0.001)</td>
<td align="right">2.68 (2.21-3.26, p&lt;0.001)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb69"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/ewenharrison/finalfit" class="external-link">finalfit</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>

<span class="va">mydata</span> <span class="op">=</span> <span class="va">colon_s</span>
<span class="va">base_explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"age.factor"</span>, <span class="st">"sex.factor"</span><span class="op">)</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"obstruct.factor"</span>, <span class="st">"perfor.factor"</span>, <span class="st">"node4.factor"</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"Surv(time, status)"</span>

<span class="va">mydata</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
    <span class="co"># Counts</span>
    <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">base_explanatory</span>,
                                                                    <span class="va">explanatory</span><span class="op">)</span>,
                                         column <span class="op">=</span> <span class="cn">TRUE</span>,
                                         fit_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Univariable</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/coxphuni.html">coxphuni</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">base_explanatory</span>, <span class="va">explanatory</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (Univariable)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Base</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/coxphmulti.html">coxphmulti</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="va">dependent</span>, <span class="va">base_explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (Base model)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Model 1</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/coxphmulti.html">coxphmulti</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">base_explanatory</span>, <span class="va">explanatory</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (Model 1)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Model 2</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/coxphmulti.html">coxphmulti</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">base_explanatory</span>, <span class="va">explanatory</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (Model 2)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Model 3</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/coxphmulti.html">coxphmulti</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">base_explanatory</span>, <span class="va">explanatory</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (Model 3)"</span><span class="op">)</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Full</span>
    <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/coxphmulti.html">coxphmulti</a></span><span class="op">(</span><span class="va">mydata</span>, <span class="va">dependent</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">base_explanatory</span>, <span class="va">explanatory</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
            <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (Full)"</span><span class="op">)</span>,
        last_merge <span class="op">=</span> <span class="cn">TRUE</span>
    <span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    
    <span class="co"># Tidy-up</span>
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">"Overall survival"</span> <span class="op">=</span> <span class="va">label</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="st">" "</span> <span class="op">=</span> <span class="va">levels</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> 
    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>`n (%)` <span class="op">=</span> <span class="va">all</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="9%">
<col width="6%">
<col width="5%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
<col width="13%">
</colgroup>
<thead><tr class="header">
<th align="left">Overall survival</th>
<th align="left"></th>
<th align="right">n (%)</th>
<th align="right">HR (Univariable)</th>
<th align="right">HR (Base model)</th>
<th align="right">HR (Model 1)</th>
<th align="right">HR (Model 2)</th>
<th align="right">HR (Model 3)</th>
<th align="right">HR (Full)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">Age</td>
<td align="left">&lt;40 years</td>
<td align="right">70 (7.5)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left">40-59 years</td>
<td align="right">344 (37.0)</td>
<td align="right">0.76 (0.53-1.09, p=0.132)</td>
<td align="right">0.76 (0.53-1.08, p=0.129)</td>
<td align="right">0.79 (0.55-1.13, p=0.198)</td>
<td align="right">0.76 (0.53-1.08, p=0.127)</td>
<td align="right">0.85 (0.59-1.22, p=0.379)</td>
<td align="right">0.90 (0.63-1.30, p=0.590)</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">60+ years</td>
<td align="right">515 (55.4)</td>
<td align="right">0.93 (0.66-1.31, p=0.668)</td>
<td align="right">0.93 (0.66-1.31, p=0.660)</td>
<td align="right">0.98 (0.69-1.40, p=0.931)</td>
<td align="right">0.92 (0.65-1.31, p=0.656)</td>
<td align="right">1.09 (0.77-1.55, p=0.615)</td>
<td align="right">1.19 (0.83-1.69, p=0.346)</td>
</tr>
<tr class="even">
<td align="left">Sex</td>
<td align="left">Female</td>
<td align="right">445 (47.9)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Male</td>
<td align="right">484 (52.1)</td>
<td align="right">1.01 (0.84-1.22, p=0.888)</td>
<td align="right">1.02 (0.85-1.23, p=0.847)</td>
<td align="right">1.02 (0.85-1.24, p=0.803)</td>
<td align="right">1.02 (0.85-1.22, p=0.854)</td>
<td align="right">1.04 (0.87-1.26, p=0.647)</td>
<td align="right">1.05 (0.87-1.27, p=0.597)</td>
</tr>
<tr class="even">
<td align="left">Obstruction</td>
<td align="left">No</td>
<td align="right">732 (80.6)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">176 (19.4)</td>
<td align="right">1.29 (1.03-1.62, p=0.028)</td>
<td align="right">-</td>
<td align="right">1.31 (1.04-1.64, p=0.022)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">1.35 (1.07-1.70, p=0.011)</td>
</tr>
<tr class="even">
<td align="left">Perforation</td>
<td align="left">No</td>
<td align="right">902 (97.1)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">27 (2.9)</td>
<td align="right">1.17 (0.70-1.95, p=0.556)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">1.18 (0.70-1.97, p=0.535)</td>
<td align="right">-</td>
<td align="right">1.16 (0.69-1.94, p=0.581)</td>
</tr>
<tr class="even">
<td align="left">&gt;4 positive nodes</td>
<td align="left">No</td>
<td align="right">674 (72.6)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left">Yes</td>
<td align="right">255 (27.4)</td>
<td align="right">2.60 (2.15-3.14, p&lt;0.001)</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">-</td>
<td align="right">2.64 (2.18-3.19, p&lt;0.001)</td>
<td align="right">2.68 (2.21-3.26, p&lt;0.001)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="support-for-complex-survey-structures-via-librarysurvey">4 Support for complex survey structures via
<code>library(survey)</code><a class="anchor" aria-label="anchor" href="#support-for-complex-survey-structures-via-librarysurvey"></a>
</h2>
<div class="section level3">
<h3 id="linear-regression-1">4.1 Linear regression<a class="anchor" aria-label="anchor" href="#linear-regression-1"></a>
</h3>
<p>Examples taken from <code><a href="https://rdrr.io/pkg/survey/man/svyglm.html" class="external-link">survey::svyglm()</a></code> help page.</p>
<div class="sourceCode" id="cb70"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"api00"</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ell"</span>, <span class="st">"meals"</span>, <span class="st">"mobility"</span><span class="op">)</span>

<span class="co"># Label data frame</span>
<span class="va">apistrat</span> <span class="op">=</span> <span class="va">apistrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
  api00 <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">api00</span>, <span class="st">"API in 2000 (api00)"</span><span class="op">)</span>,
  ell <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">ell</span>, <span class="st">"English language learners (percent)(ell)"</span><span class="op">)</span>,
  meals <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">meals</span>, <span class="st">"Meals eligible (percent)(meals)"</span><span class="op">)</span>,
  mobility <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">mobility</span>, <span class="st">"First year at the school (percent)(mobility)"</span><span class="op">)</span>,
  sch.wide <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">sch.wide</span>, <span class="st">"School-wide target met (sch.wide)"</span><span class="op">)</span>
  <span class="op">)</span>

<span class="co"># Linear example</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"api00"</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ell"</span>, <span class="st">"meals"</span>, <span class="st">"mobility"</span><span class="op">)</span>

<span class="co"># Stratified design</span>
<span class="va">dstrat</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/pkg/survey/man/svydesign.html" class="external-link">svydesign</a></span><span class="op">(</span>id<span class="op">=</span><span class="op">~</span><span class="fl">1</span>,strata<span class="op">=</span><span class="op">~</span><span class="va">stype</span>, weights<span class="op">=</span><span class="op">~</span><span class="va">pw</span>, data<span class="op">=</span><span class="va">apistrat</span>, fpc<span class="op">=</span><span class="op">~</span><span class="va">fpc</span><span class="op">)</span>

<span class="co"># Univariable fit</span>
<span class="va">fit_uni</span> <span class="op">=</span> <span class="va">dstrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/svyglmuni.html">svyglmuni</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (univariable)"</span><span class="op">)</span>

<span class="co"># Multivariable fit</span>
<span class="va">fit_multi</span> <span class="op">=</span> <span class="va">dstrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/svyglmmulti.html">svyglmmulti</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>estimate_suffix <span class="op">=</span> <span class="st">" (multivariable)"</span><span class="op">)</span>

<span class="co"># Pipe together</span>
<span class="va">apistrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, fit_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_uni</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_multi</span>, last_merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">apistrat</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="32%">
<col width="8%">
<col width="7%">
<col width="10%">
<col width="20%">
<col width="20%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: API in 2000 (api00)</th>
<th align="left"></th>
<th align="right">unit</th>
<th align="right">value</th>
<th align="right">Coefficient (univariable)</th>
<th align="right">Coefficient (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">English language learners (percent)(ell)</td>
<td align="left">[0.0,84.0]</td>
<td align="right">Mean (sd)</td>
<td align="right">652.8 (121.0)</td>
<td align="right">-3.73 (-4.36–3.10, p&lt;0.001)</td>
<td align="right">-0.48 (-1.25-0.29, p=0.222)</td>
</tr>
<tr class="even">
<td align="left">Meals eligible (percent)(meals)</td>
<td align="left">[0.0,100.0]</td>
<td align="right">Mean (sd)</td>
<td align="right">652.8 (121.0)</td>
<td align="right">-3.38 (-3.71–3.05, p&lt;0.001)</td>
<td align="right">-3.14 (-3.70–2.58, p&lt;0.001)</td>
</tr>
<tr class="odd">
<td align="left">First year at the school (percent)(mobility)</td>
<td align="left">[1.0,99.0]</td>
<td align="right">Mean (sd)</td>
<td align="right">652.8 (121.0)</td>
<td align="right">-1.43 (-3.31-0.46, p=0.137)</td>
<td align="right">0.23 (-0.55-1.00, p=0.567)</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="binomial-example">4.2 Binomial example<a class="anchor" aria-label="anchor" href="#binomial-example"></a>
</h3>
<p>Note model family needs specified and exponentiation set to
<code>TRUE</code> if desired.</p>
<div class="sourceCode" id="cb71"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://r-survey.r-forge.r-project.org/survey/" class="external-link">survey</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">api</span><span class="op">)</span>
<span class="va">dependent</span> <span class="op">=</span> <span class="st">"sch.wide"</span>
<span class="va">explanatory</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ell"</span>, <span class="st">"meals"</span>, <span class="st">"mobility"</span><span class="op">)</span>

<span class="co"># Label data frame</span>
<span class="va">apistrat</span> <span class="op">=</span> <span class="va">apistrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>
  api00 <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">api00</span>, <span class="st">"API in 2000 (api00)"</span><span class="op">)</span>,
  ell <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">ell</span>, <span class="st">"English language learners (percent)(ell)"</span><span class="op">)</span>,
  meals <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">meals</span>, <span class="st">"Meals eligible (percent)(meals)"</span><span class="op">)</span>,
  mobility <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">mobility</span>, <span class="st">"First year at the school (percent)(mobility)"</span><span class="op">)</span>,
  sch.wide <span class="op">=</span> <span class="fu"><a href="../reference/ff_label.html">ff_label</a></span><span class="op">(</span><span class="va">sch.wide</span>, <span class="st">"School-wide target met (sch.wide)"</span><span class="op">)</span>
  <span class="op">)</span>
  
<span class="co"># Univariable fit</span>
<span class="va">fit_uni</span> <span class="op">=</span> <span class="va">dstrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/svyglmuni.html">svyglmuni</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, family <span class="op">=</span> <span class="st">"quasibinomial"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>exp <span class="op">=</span> <span class="cn">TRUE</span>, estimate_name <span class="op">=</span> <span class="st">"OR"</span>, estimate_suffix <span class="op">=</span> <span class="st">" (univariable)"</span><span class="op">)</span>

<span class="co"># Multivariable fit</span>
<span class="va">fit_multi</span> <span class="op">=</span> <span class="va">dstrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/svyglmmulti.html">svyglmmulti</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, family <span class="op">=</span> <span class="st">"quasibinomial"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/fit2df.html">fit2df</a></span><span class="op">(</span>exp <span class="op">=</span> <span class="cn">TRUE</span>, estimate_name <span class="op">=</span> <span class="st">"OR"</span>, estimate_suffix <span class="op">=</span> <span class="st">" (multivariable)"</span><span class="op">)</span>

<span class="co"># Pipe together</span>
<span class="va">apistrat</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/summary_factorlist.html">summary_factorlist</a></span><span class="op">(</span><span class="va">dependent</span>, <span class="va">explanatory</span>, fit_id <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_uni</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/ff_merge.html">ff_merge</a></span><span class="op">(</span><span class="va">fit_multi</span>, last_merge <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span>
  <span class="fu"><a href="../reference/dependent_label.html">dependent_label</a></span><span class="op">(</span><span class="va">apistrat</span>, <span class="va">dependent</span><span class="op">)</span> <span class="op">-&gt;</span> <span class="va">t</span></code></pre></div>
<table class="table">
<colgroup>
<col width="34%">
<col width="7%">
<col width="9%">
<col width="9%">
<col width="19%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">Dependent: School-wide target met (sch.wide)</th>
<th align="left"></th>
<th align="right">No</th>
<th align="right">Yes</th>
<th align="right">OR (univariable)</th>
<th align="right">OR (multivariable)</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">English language learners (percent)(ell)</td>
<td align="left">Mean (SD)</td>
<td align="right">22.5 (19.3)</td>
<td align="right">20.5 (20.0)</td>
<td align="right">1.00 (0.98-1.01, p=0.715)</td>
<td align="right">1.00 (0.97-1.02, p=0.851)</td>
</tr>
<tr class="even">
<td align="left">Meals eligible (percent)(meals)</td>
<td align="left">Mean (SD)</td>
<td align="right">46.0 (29.1)</td>
<td align="right">44.7 (29.0)</td>
<td align="right">1.00 (0.99-1.01, p=0.968)</td>
<td align="right">1.00 (0.98-1.02, p=0.732)</td>
</tr>
<tr class="odd">
<td align="left">First year at the school (percent)(mobility)</td>
<td align="left">Mean (SD)</td>
<td align="right">13.9 (8.6)</td>
<td align="right">17.2 (13.0)</td>
<td align="right">1.06 (1.00-1.12, p=0.049)</td>
<td align="right">1.06 (1.00-1.13, p=0.058)</td>
</tr>
</tbody>
</table>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Ewen Harrison, Tom Drake, Riinu Pius.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
